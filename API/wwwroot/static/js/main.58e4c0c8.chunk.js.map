{"version":3,"sources":["app/models/activity.ts","app/models/pagination.ts","app/api/agent.ts","app/models/profiles.ts","app/stores/activityStore.ts","app/stores/profilesStore.ts","app/stores/userStore.ts","app/stores/stores.ts","app/stores/commonStore.ts","app/stores/modalStore.ts","app/stores/commentStore.ts","app/layout/NavBar.tsx","features/activities/dashboard/ActivityFilters.tsx","features/profiles/FollowButton.tsx","features/profiles/ProfilesCard.tsx","features/activities/dashboard/ActivityItemAttendee.tsx","features/activities/dashboard/ActivityItem.tsx","features/activities/dashboard/ActivityList.tsx","features/activities/dashboard/ActivityPlaceholder.tsx","features/activities/dashboard/ActivityDashboard.tsx","app/common/form/MyTextInput.tsx","features/users/LoginForm.tsx","features/errors/ValidationError.tsx","features/users/RegisterForm.tsx","features/activities/home/HomePage.tsx","app/layout/Loading.tsx","app/common/form/MyTextArea.tsx","app/common/form/MySelectInput.tsx","app/common/options/categoryOptions.ts","app/common/form/MyDatePicker.tsx","features/activities/form/ActivityForm.tsx","features/activities/details/ActivityDetailsChat.tsx","features/activities/details/ActivityDetailsHeader.tsx","features/activities/details/ActivityDetailsInfo.tsx","features/activities/details/ActivityDetailsSidebar.tsx","features/activities/details/ActivityDetails.tsx","features/errors/TestError.tsx","features/errors/NotFound.tsx","features/errors/ServerError.tsx","app/common/modals/ModalContainer.tsx","features/profiles/ProfilesEventCard.tsx","features/profiles/ProfilesEventsMenu.tsx","features/profiles/ProfilesEvents.tsx","features/profiles/ProfilesFollows.tsx","app/common/photos/PhotoCropperWidget.tsx","app/common/photos/PhotoDropzoneWidget.tsx","app/common/photos/PhotoUploadWidget.tsx","features/profiles/ProfilesPhotos.tsx","features/profiles/ProfilesContent.tsx","features/profiles/ProfilesHeader.tsx","features/profiles/ProfilesPage.tsx","app/layout/PrivateRoute.tsx","app/common/utils/hook.ts","features/users/RegisterSuccess.tsx","features/users/ConfirmEmail.tsx","app/layout/App.tsx","reportWebVitals.ts","app/layout/ScrollToTop.tsx","index.tsx"],"names":["Activity","init","Object","assign","this","ActivityFormValues","activity","id","undefined","title","category","description","city","venue","date","PaginatedResult","data","pagination","PagingParams","pageNumber","pageSize","axios","defaults","baseURL","process","responseBody","response","interceptors","request","use","config","stores","commonStore","token","headers","Authorization","a","JSON","parse","error","status","toast","method","errors","hasOwnProperty","history","push","modelStateErrors","key","flat","startsWith","userStore","logout","setServerError","Promise","reject","actions","url","get","then","body","post","put","delete","agent","activities","activityList","params","activityDetails","createActivity","updateActivity","deleteActivity","updateAttend","users","current","login","user","register","fbLogin","accessToken","refreshToken","confirmEmail","email","resendConfirmEmail","profiles","username","uploadPhoto","file","formData","FormData","append","setMainPhoto","deletePhoto","updateFollow","loadListFollows","predicate","loadUserActivities","Profiles","displayName","userName","mainPhoto","ActivityStore","activityRegistry","Map","selectedActivity","isLoading","isSubmitting","pagingParams","set","setPredicate","value","includes","forEach","setPagingParams","loadActivities","axiosPagingParams","result","setActivity","setPagination","console","log","runInAction","isGoing","attendees","some","attendee","isHost","hostUserName","host","find","Date","loadActivityDetail","selectActivity","cancelSelectActivity","submitActivity","newActivity","uuid","updateAttendance","filter","cancelActivityToggle","isCancelled","updateAttendeeFollow","isFollowing","followersCount","makeAutoObservable","reaction","keys","clear","URLSearchParams","toString","toISOString","Array","from","values","sort","b","getTime","entries","activitiesByDate","reduce","format","ProfilesStore","follows","isUpload","isSetMain","isDeleting","loadingFollows","loadingUserActivities","activeTab","activeEventMenu","setActiveEventMenu","activeMenu","setActiveTab","getProfiles","photo","photos","isMain","setPhoto","p","updateFollowing","following","activityStore","followingsCount","follow","UserStore","fbAccessToken","fbLoading","refreshTokenTimeout","setToken","startRefreshTokenTimer","modalStore","closeModal","getCurrentUser","photoUrl","getFacebookLoginStatus","window","FB","getLoginStatus","authResponse","facebookLogin","apiLogin","catch","finally","scope","stopRefreshTokenTimer","jwtToken","atob","split","timeout","exp","now","setTimeout","clearTimeout","serverError","localStorage","getItem","appLoaded","setAppLoaded","setItem","removeItem","modal","open","openModal","content","profilesStore","commentStore","comments","hubConnection","createHubConnection","activityId","HubConnectionBuilder","withUrl","accessTokenFactory","withAutomaticReconnect","configureLogging","LogLevel","Information","build","start","on","map","comment","createAt","unshift","stopHubConnection","stop","clearComments","sendComment","invoke","StoreContext","createContext","useStores","useContext","observer","isLoggedIn","Menu","inverted","fixed","Container","Item","as","NavLink","to","exact","header","src","alt","style","marginRight","name","Button","onClick","positive","position","Image","avatar","spaced","Dropdown","pointing","text","Link","icon","vertical","size","width","marginTop","Header","attached","color","active","has","onChange","Reveal","animated","Content","visible","fluid","hidden","basic","loading","e","preventDefault","handleFollow","Card","floated","wrapped","ui","Description","extra","Icon","styles","borderColor","borderWidth","cursor","List","horizontal","Popup","hoverable","trigger","circular","bordered","ActivityItem","Segment","Group","Label","textAlign","marginBottom","secondary","clearing","groupedActivities","group","sub","ActivityPlaceholder","Placeholder","minHeight","image","Line","Paragraph","disabled","useState","loadingNext","setLoadingNext","useEffect","Grid","Column","pageStart","loadMore","currentPage","hasMore","totalPages","initialLoad","MyTextInput","props","useField","field","meta","FormField","touched","label","initialValues","password","onSubmit","setErrors","handleSubmit","dirty","className","autoComplete","placeholder","type","render","ValidationError","Message","i","validationSchema","Yup","required","matches","isValid","Divider","Loading","Dimmer","Loader","MyTextArea","MySelectInput","helpers","Select","clearable","options","d","setValue","onBlur","setTouched","categoryOptions","selected","useParams","nullable","enableReinitialize","handleFormSubmit","rows","placeholderText","showTimeSelect","timeCaption","dateFormat","border","Comment","Avatar","Author","Metadata","formatDistanceToNow","Text","whiteSpace","resetForm","onKeyPress","shiftKey","activityImageStyle","activityImageTextStyle","bottom","left","height","padding","zIndex","top","ribbon","verticalAlign","numOfFollowing","length","relaxed","divided","Extra","TestErrors","widths","baseUrl","err","primary","NotFound","Inline","message","details","Modal","onClose","Meta","handleItemClick","Tab","Pane","itemsPerRow","PhotoCropperWidget","photoPreview","setCropper","initialAspectRatio","aspectRatio","preview","guides","viewMode","autoCropArea","background","onInitialized","cropper","PhotoDropzoneWidget","setFiles","dzStyles","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","PhotoUploadWidget","files","revokeObjectURL","overflow","getCroppedCanvas","toBlob","blob","isCurrentUser","isPhotoMode","setIsPhotoMode","targetMainPhoto","setTargetMainPhoto","handleSetMainPhoto","handleDeletePhoto","panes","menuItem","menu","menuPosition","onTabChange","activeIndex","Statistic","ProfilesHeader","PrivateRoute","Component","component","rest","useQuery","useLocation","search","RegisterSuccess","success","ConfirmEmail","handleResendEmail","Status","setStatus","getBody","location","path","HomePage","ActivityDashboard","ActivityForm","ActivityDetails","ProfilesPage","ServerError","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ScrollToTop","pathname","scrollTo","createBrowserHistory","ReactDOM","Provider","document","getElementById"],"mappings":"oXAyBaA,EACT,WAAYC,GAA0B,oBAClCC,OAAOC,OAAOC,KAAMH,IAIfI,EAST,WAAYC,GAAsB,yBARlCC,QAAcC,EAQmB,KAPjCC,MAAgB,GAOiB,KANjCC,SAAmB,GAMc,KALjCC,YAAsB,GAKW,KAJjCC,KAAe,GAIkB,KAHjCC,MAAgB,GAGiB,KAFjCC,KAAoB,KAGZR,IACAF,KAAKG,GAAKD,EAASC,GACnBH,KAAKK,MAAQH,EAASG,MACtBL,KAAKM,SAAWJ,EAASI,SACzBN,KAAKO,YAAcL,EAASK,YAC5BP,KAAKU,KAAOR,EAASQ,KACrBV,KAAKS,MAAQP,EAASO,MACtBT,KAAKQ,KAAON,EAASM,O,yBCzCpBG,EAIT,WAAYC,EAASC,GAAwB,yBAH7CD,UAG4C,OAF5CC,gBAE4C,EACxCb,KAAKY,KAAOA,EACZZ,KAAKa,WAAaA,GAIbC,EAIT,aAA0D,IAA9CC,EAA6C,uDAAxB,EAAGC,EAAqB,uDAAF,EAAE,yBAHzDD,gBAGyD,OAFzDC,cAEyD,EACrDhB,KAAKe,WAAaA,EAClBf,KAAKgB,SAAWA,GCdxBC,IAAMC,SAASC,QAAUC,OAEzB,IAAMC,EAAe,SAAKC,GAAL,OAAoCA,EAASV,MAQlEK,IAAMM,aAAaC,QAAQC,KAAI,SAAAC,GAI3B,OAHGC,EAAOC,YAAYC,QAClBH,EAAOI,QAASC,cAAhB,iBAA0CJ,EAAOC,YAAYC,QAE1DH,KAGXT,IAAMM,aAAaD,SAASG,IAA5B,+BAAAO,EAAA,MAAgC,WAAMV,GAAN,eAAAU,EAAA,iFAGxBnB,EAAaS,EAASQ,QAAT,YAHW,uBAKxBR,EAASV,KAAO,IAAID,EAAgBW,EAASV,KAAMqB,KAAKC,MAAMrB,IALtC,kBAMjBS,GANiB,gCAQrBA,GARqB,2CAAhC,uDASG,SAACa,GAAuB,IAAD,EACtB,EAAwCA,EAAMb,SAAvCV,EAAP,EAAOA,KAAMwB,EAAb,EAAaA,OAAQV,EAArB,EAAqBA,OAAQI,EAA7B,EAA6BA,QAC7B,OAAQM,GACJ,KAAK,IAOD,GANmB,kBAATxB,GACNyB,IAAMF,MAAMvB,GAEK,QAAlBc,EAAOY,QAAoB1B,EAAK2B,OAAOC,eAAe,OACrDC,GAAQC,KAAK,aAEd9B,EAAK2B,OAAO,CACX,IAAII,EAAmB,GACvB,IAAI,IAAMC,KAAOhC,EAAK2B,OACf3B,EAAK2B,OAAOK,IACXD,EAAiBD,KAAK9B,EAAK2B,OAAOK,IAG1C,MAAMD,EAAiBE,OAE3B,MACJ,KAAK,KACD,UAAGf,EAAQ,2BAAX,aAAG,EAA6BgB,WAAW,mCACvCnB,EAAOoB,UAAUC,SACjBX,IAAMF,MAAM,yCAEhB,MACJ,KAAK,IACDM,GAAQC,KAAK,cACb,MACJ,KAAK,IACDf,EAAOC,YAAYqB,eAAerC,GAClC6B,GAAQC,KAAK,iBAKrB,OAAOQ,QAAQC,OAAOhB,MAG1B,IAAMiB,EACG,SAAKC,GAAL,OAAqBpC,IAAMqC,IAAOD,GAAKE,KAAKlC,IAD/C+B,EAEI,SAAKC,EAAaG,GAAlB,OAA+BvC,IAAMwC,KAAQJ,EAAKG,GAAMD,KAAKlC,IAFjE+B,EAGG,SAAKC,EAAaG,GAAlB,OAA+BvC,IAAMyC,IAAOL,EAAKG,GAAMD,KAAKlC,IAH/D+B,EAIM,SAAKC,GAAL,OAAqBpC,IAAM0C,OAAUN,GAAKE,KAAKlC,IA4C5CuC,EAND,CACVC,WApCe,CACfC,aAAc,SAACC,GAAD,OAA6B9C,IAAMqC,IAAiC,cAAe,CAACS,WAASR,KAAKlC,IAChH2C,gBAAiB,SAAC7D,GAAD,OAAgBiD,EAAA,sBAAqCjD,KACtE8D,eAAgB,SAAC/D,GAAD,OAAkCkD,EAAmB,cAAelD,IACpFgE,eAAgB,SAAChE,GAAD,OAAkCkD,EAAA,sBAAiClD,EAASC,IAAMD,IAClGiE,eAAgB,SAAChE,GAAD,OAAgBiD,EAAA,sBAAoCjD,KACpEiE,aAAc,SAACjE,GAAD,OAAgBiD,EAAA,sBAAkCjD,EAAlC,WAA+C,MA+B7EkE,MA5BU,CACVC,QAAS,kBAAMlB,EAAkB,aACjCmB,MAAO,SAACC,GAAD,OAAoBpB,EAAmB,gBAAiBoB,IAC/DC,SAAU,SAACD,GAAD,OAAoBpB,EAAmB,mBAAoBoB,IACrEE,QAAS,SAACC,GAAD,OAAyBvB,EAAA,sCAAkDuB,GAAe,KACnGC,aAAc,kBAAMxB,EAAmB,uBAAwB,KAC/DyB,aAAc,SAAChD,EAAeiD,GAAhB,OAAkC1B,EAAA,qCAAiDvB,EAAjD,sBAAoEiD,GAAS,KAC7HC,mBAAoB,SAACD,GAAD,OAAmB1B,EAAA,kDAA6D0B,MAsBpGE,SAnBa,CACb1B,IAAK,SAAC2B,GAAD,OAAsB7B,EAAA,oBAAmC6B,KAC9DC,YAAa,SAACC,GACV,IAAIC,EAAW,IAAIC,SAEnB,OADAD,EAASE,OAAO,OAAQH,GACjBlE,IAAMwC,KAAY,SAAU2B,EAAU,CACzCtD,QAAS,CAAC,eAAgB,0BAGlCyD,aAAc,SAACpF,GAAD,OAAgBiD,EAAA,uBAA4BjD,GAAM,KAChEqF,YAAa,SAACrF,GAAD,OAAgBiD,EAAA,kBAA0BjD,KACvDsF,aAAc,SAACR,GAAD,OAAsB7B,EAAA,kBAAuB6B,GAAY,KACvES,gBAAiB,SAACT,EAAkBU,GAAnB,OAAyCvC,EAAA,kBAAmC6B,EAAnC,sBAAyDU,KACnHC,mBAAoB,SAACX,EAAkBU,GAAnB,OAAyCvC,EAAA,oBAAyC6B,EAAzC,kCAA2EU,O,kBCpG/HE,EACT,WAAYrB,GAAY,oBACpBxE,KAAK8F,YAActB,EAAKsB,YACxB9F,KAAK+F,SAAWvB,EAAKuB,SACrB/F,KAAKgG,UAAYxB,EAAKwB,WCRTC,E,WASjB,aAAc,IAAD,gCARbC,iBAAmB,IAAIC,IAQV,KAPbC,sBAAyChG,EAO5B,KANbiG,WAAqB,EAMR,KALbC,cAAwB,EAKX,KAJbzF,WAAgC,KAInB,KAHb0F,aAAe,IAAIzF,EAGN,KAFb6E,WAAY,IAAIQ,KAAMK,IAAI,OAAO,GAEpB,KAabC,aAAe,SAAC7D,EAAa8D,GAMtB,CAAC,MAAO,UAAW,UAAUC,SAAS/D,KAJrC,EAAK+C,UAAUiB,SAAQ,SAACF,EAAO9D,GACf,cAARA,GAAqB,EAAK+C,UAAUhC,OAAOf,MAKnD,EAAK+C,UAAUa,IAAI5D,GAAK,IAEjB,cAARA,IACC,EAAK+C,UAAUhC,OAAO,aACtB,EAAKgC,UAAUa,IAAI,YAAaE,KAzB3B,KA6BbG,gBAAkB,SAACN,GACf,EAAKA,aAAeA,GA9BX,KAiEbO,eAjEa,sBAiEI,4BAAA9E,EAAA,6DACb,EAAKqE,WAAY,EADJ,kBAGYzC,EAAMC,WAAWC,aAAa,EAAKiD,mBAH/C,QAGHC,EAHG,QAIFpG,KAAKgG,SAAQ,SAAA1G,GAChB,EAAK+G,YAAY/G,MAErB,EAAKgH,cAAcF,EAAOnG,YAPjB,gDASTsG,QAAQC,IAAR,MATS,yBAWTC,aAAY,kBAAM,EAAKhB,WAAY,KAX1B,4EAjEJ,KAgFba,cAAgB,SAACrG,GACb,EAAKA,WAAaA,GAjFT,KAoFLoG,YAAc,SAAC/G,GAAwB,IAAD,EAElC,EADFsE,EAAO7C,EAAOoB,UAAUyB,KAC3BA,IACCtE,EAASoH,QAAT,UAAmBpH,EAASqH,iBAA5B,aAAmB,EAAoBC,MAAK,SAAAC,GAAQ,OAAIA,EAAS1B,WAAavB,EAAKuB,YACnF7F,EAASwH,OAASxH,EAASyH,eAAiBnD,EAAKuB,UAErD7F,EAAS0H,KAAT,UAAgB1H,EAASqH,iBAAzB,aAAgB,EAAoBM,MAAK,SAAAJ,GAAQ,OAAIA,EAAS1B,WAAa7F,EAASyH,gBACpFzH,EAASQ,KAAO,IAAIoH,KAAK5H,EAASQ,MAClC,EAAKwF,iBAAiBM,IAAItG,EAASC,GAAID,IA5F9B,KA+Fb6H,mBA/Fa,uCA+FQ,WAAO5H,GAAP,iBAAA6B,EAAA,2DACb9B,EAAW,EAAKgG,iBAAiB5C,IAAInD,IADxB,uBAGb,EAAK6H,eAAe9H,GAHP,kBAINA,GAJM,uBAMA0D,EAAMC,WAAWG,gBAAgB7D,GANjC,cAMbS,EANa,OAOjB,EAAKqG,YAAYrG,GACjB,EAAKoH,eAAepH,GARH,kBASVA,GATU,4CA/FR,2DA2GboH,eAAiB,SAAC9H,GACd,EAAKkG,iBAAmBlG,GA5Gf,KA+Gb+H,qBAAuB,WACnB,EAAK7B,sBAAmBhG,GAhHf,KAmHb8H,eAnHa,uCAmHI,WAAOhI,GAAP,qBAAA8B,EAAA,yDACPwC,EAAO7C,EAAOoB,UAAUyB,KAC1B2D,EAAc,IAAIvI,EAASM,IAC5BA,EAASC,GAHC,iCAIHyD,EAAMC,WAAWK,eAAeiE,GAJ7B,cAKLjE,EALK,2BAKgB,EAAKgC,iBAAiB5C,IAAIpD,EAASC,KAAQD,GACpE,EAAKgG,iBAAiBM,IAAItC,EAAe/D,GAAK+D,GAC9C,EAAK8D,eAAe9D,GAPX,kCAWTiE,EAAYhI,GAAKiI,cAXR,UAYHxE,EAAMC,WAAWI,eAAekE,GAZ7B,eAaLV,EAAW,IAAI5B,EAASrB,GAC5B2D,EAAYR,aAAenD,EAAMuB,SACjCoC,EAAYZ,UAAY,CAACE,GACzB,EAAKR,YAAYkB,GACjB,EAAKH,eAAeG,GAjBX,+DAnHJ,2DAyIbhE,eAAiB,SAAChE,GACdkH,aAAY,WACR,EAAKf,cAAe,KAExB1C,EAAMC,WAAWM,eAAehE,GAAIoD,MAAK,WACrC8D,aAAY,WACR,EAAKnB,iBAAiBvC,OAAOxD,GAC7B,EAAKmG,cAAe,SAhJnB,KAqJb+B,iBArJa,uCAqJM,WAAOlI,GAAP,mBAAA6B,EAAA,6DACTwC,EAAO7C,EAAOoB,UAAUyB,KAC9B6C,aAAY,kBAAM,EAAKf,cAAe,KAFvB,kBAIL1C,EAAMC,WAAWO,aAAajE,GAJzB,QAKX,UAAG,EAAKiG,wBAAR,aAAG,EAAuBkB,SACtBD,aAAY,WAAO,IAAD,EACd,EAAKjB,iBAAkBmB,UAAvB,UAAmC,EAAKnB,iBAAkBmB,iBAA1D,aAAmC,EAAkCe,QAAO,SAAAtG,GAAC,OAAIA,EAAE+D,YAAF,OAAevB,QAAf,IAAeA,OAAf,EAAeA,EAAMuB,aACtG,EAAKK,iBAAkBkB,SAAU,MAIjCG,EAAW,IAAI5B,EAASrB,GAC5B6C,aAAY,WAAO,IAAD,IACd,YAAKjB,wBAAL,mBAAuBmB,iBAAvB,SAAkC7E,KAAK+E,GACvC,EAAKrB,iBAAkBkB,SAAU,MAGzCD,aAAY,kBAAM,EAAKnB,iBAAiBM,IAAI,EAAKJ,iBAAkBjG,GAAI,EAAKiG,qBAlBjE,gDAoBXe,QAAQC,IAAR,MApBW,yBAsBXC,aAAY,kBAAM,EAAKf,cAAe,KAtB3B,4EArJN,2DA+KbiC,qBA/Ka,sBA+KU,sBAAAvG,EAAA,6DACnB,EAAKsE,cAAe,EADD,kBAGT1C,EAAMC,WAAWO,aAAa,EAAKgC,iBAAkBjG,IAH5C,OAIfkH,aAAY,WAAM,IAAD,EACb,EAAKjB,iBAAkBoC,cAAc,UAAC,EAAKpC,wBAAN,aAAC,EAAuBoC,aAC7D,EAAKtC,iBAAiBM,IAAI,EAAKJ,iBAAkBjG,GAAI,EAAKiG,qBAN/C,gDASfe,QAAQC,IAAR,MATe,yBAWfC,aAAY,kBAAM,EAAKf,cAAe,KAXvB,4EA/KV,KA8LbmC,qBAAuB,SAACxD,GACpB,EAAKiB,iBAAiBU,SAAQ,SAAA1G,GAC1BA,EAASqH,UAAUX,SAAQ,SAAAa,GACpBA,EAAS1B,WAAad,IACrBwC,EAASiB,YAAcjB,EAASkB,iBAAmBlB,EAASkB,iBAC5DlB,EAASiB,aAAejB,EAASiB,oBAlM7CE,YAAmB5I,MAEnB6I,aACI,kBAAM,EAAKlD,UAAUmD,UACrB,WACI,EAAKvC,aAAe,IAAIzF,EACxB,EAAKoF,iBAAiB6C,QACtB,EAAKjC,oB,mDAyBjB,WACI,IAAM/C,EAAS,IAAIiF,gBAanB,OAZAjF,EAAOuB,OAAO,aAActF,KAAKuG,aAAaxF,WAAWkI,YACzDlF,EAAOuB,OAAO,WAAYtF,KAAKuG,aAAavF,SAASiI,YAErDjJ,KAAK2F,UAAUiB,SAAQ,SAACF,EAAO9D,GAChB,cAARA,EACCmB,EAAOuB,OAAO1C,EAAM8D,EAAewC,eAGnCnF,EAAOuB,OAAO1C,EAAK8D,MAIpB3C,I,4BAGX,WACI,OAAOoF,MAAMC,KAAKpJ,KAAKkG,iBAAiBmD,UACnCC,MAAK,SAACtH,EAAGuH,GAAJ,OAAUvH,EAAEtB,KAAM8I,UAAYD,EAAE7I,KAAM8I,e,6BAGpD,WACI,OAAO1J,OAAO2J,QACVzJ,KAAK0J,iBAAiBC,QAAO,SAAC9F,EAAY3D,GACtC,IAAMQ,EAAOkJ,kBAAO1J,EAASQ,KAAO,eAEpC,OADAmD,EAAWnD,GAAQmD,EAAWnD,GAAX,sBAAuBmD,EAAWnD,IAAlC,CAAyCR,IAAY,CAACA,GAClE2D,IACR,S,qBCzEMgG,E,WAcjB,aAAc,IAAD,gCAbb7E,SAA4B,KAaf,KAZb8E,QAAsB,GAYT,KAXb5D,iBAAmB,IAAIC,IAWV,KAVbE,WAAqB,EAUR,KATb0D,UAAoB,EASP,KARbC,WAAqB,EAQR,KAPbC,YAAsB,EAOT,KANbvB,aAAuB,EAMV,KALbwB,gBAA0B,EAKb,KAJbC,uBAAiC,EAIpB,KAHbC,UAAoB,EAGP,KAFbC,gBAA0B,SAEb,KA8BbC,mBAAqB,SAACC,GAClB,EAAKF,gBAAkBE,GA/Bd,KAuCb3E,mBAvCa,uCAuCQ,WAAOD,GAAP,eAAA3D,EAAA,6DACjB,EAAKmI,uBAAwB,EAC7B,EAAKjE,iBAAiB6C,QAFL,kBAIMnF,EAAMoB,SAASY,mBAAmB,EAAKZ,SAAUe,SAAUJ,GAJjE,OAITqB,EAJS,OAKbK,aAAY,WACRL,EAAOJ,SAAQ,SAAA1G,GACXA,EAASQ,KAAO,IAAIoH,KAAK5H,EAASQ,MAClC2G,aAAY,WACR,EAAKnB,iBAAiBM,IAAItG,EAASC,GAAID,YATtC,gDAebiH,QAAQC,IAAR,MAfa,yBAiBbC,aAAY,kBAAO,EAAK8C,uBAAwB,KAjBnC,4EAvCR,2DA4DbK,aAAe,SAACJ,GACZ,EAAKA,UAAYA,GA7DR,KAuEbK,YAvEa,uCAuEC,WAAOxF,GAAP,eAAAjD,EAAA,6DACV,EAAKqE,WAAY,EADP,kBAGezC,EAAMoB,SAAS1B,IAAI2B,GAHlC,OAGFD,EAHE,OAINqC,aAAY,kBAAK,EAAKrC,SAAWA,KAJ3B,gDAMNmC,QAAQC,IAAR,MANM,yBAQNC,aAAY,kBAAK,EAAKhB,WAAY,KAR5B,4EAvED,2DAmFbnB,YAnFa,uCAmFC,WAAOC,GAAP,iBAAAnD,EAAA,6DACV,EAAK+H,UAAW,EADN,kBAGenG,EAAMoB,SAASE,YAAYC,GAH1C,OAGF7D,EAHE,OAIFoJ,EAAQpJ,EAASV,KACrByG,aAAY,WACL,EAAKrC,WACJ,EAAKA,SAAS2F,OAAOjI,KAAKgI,GACvBA,EAAME,QAAUjJ,EAAOoB,UAAUyB,OAChC7C,EAAOoB,UAAU8H,SAASH,EAAMrH,KAChC,EAAK2B,SAASgB,UAAY0E,EAAMrH,SAVtC,gDAeN8D,QAAQC,IAAR,MAfM,yBAiBNC,aAAY,kBAAK,EAAK0C,UAAW,KAjB3B,4EAnFD,2DAwGbxE,aAxGa,uCAwGE,WAAOmF,GAAP,SAAA1I,EAAA,6DACX,EAAKgI,WAAY,EADN,kBAGDpG,EAAMoB,SAASO,aAAamF,EAAMvK,IAHjC,OAIPwB,EAAOoB,UAAU8H,SAASH,EAAMrH,KAChCgE,aAAY,WACL,EAAKrC,WACJ,EAAKA,SAAS2F,OAAO9C,MAAK,SAAAiD,GAAC,OAAIA,EAAEF,UAASA,QAAS,EACnD,EAAK5F,SAAS2F,OAAO9C,MAAK,SAAAiD,GAAC,OAAIA,EAAE3K,KAAOuK,EAAMvK,MAAKyK,QAAS,EAC5D,EAAK5F,SAASgB,UAAY0E,EAAMrH,QATjC,gDAcP8D,QAAQC,IAAR,MAdO,yBAgBPC,aAAY,kBAAK,EAAK2C,WAAY,KAhB3B,4EAxGF,2DA4HbxE,YA5Ha,uCA4HC,WAAOrF,GAAP,SAAA6B,EAAA,6DACV,EAAKiI,YAAa,EADR,kBAGArG,EAAMoB,SAASQ,YAAYrF,GAH3B,OAINkH,aAAY,WACL,EAAKrC,WACJ,EAAKA,SAAU2F,OAAS,EAAK3F,SAAU2F,OAAOrC,QAAO,SAAAwC,GAAC,OAAIA,EAAE3K,KAAOA,SANrE,gDAUNgH,QAAQC,IAAR,MAVM,yBAYNC,aAAY,kBAAK,EAAK4C,YAAa,KAZ7B,4EA5HD,2DA4Ibc,gBA5Ia,uCA4IK,WAAOhF,EAAkBiF,GAAzB,SAAAhJ,EAAA,6DACd,EAAK0G,aAAc,EADL,kBAGJ9E,EAAMoB,SAASS,aAAaM,GAHxB,OAIVpE,EAAOsJ,cAAcxC,qBAAqB1C,GAC1CsB,aAAY,WAAO,IAAD,IACX,EAAKrC,UAAY,EAAKA,SAASe,YAAd,UAA2BpE,EAAOoB,UAAUyB,YAA5C,aAA2B,EAAuBuB,WAAY,EAAKf,SAASe,WAAaA,IACzGiF,EAAY,EAAKhG,SAAS2D,iBAAmB,EAAK3D,SAAS2D,iBAC3D,EAAK3D,SAAS0D,aAAe,EAAK1D,SAAS0D,aAE5C,EAAK1D,UAAY,EAAKA,SAASe,YAAd,UAA2BpE,EAAOoB,UAAUyB,YAA5C,aAA2B,EAAuBuB,YAClEiF,EAAY,EAAKhG,SAASkG,kBAAoB,EAAKlG,SAASkG,mBAEhE,EAAKpB,QAAQlD,SAAQ,SAAAuE,GACdA,EAAOpF,WAAaA,IACnBoF,EAAOzC,YAAcyC,EAAOxC,iBAAmBwC,EAAOxC,iBACtDwC,EAAOzC,aAAeyC,EAAOzC,mBAhB/B,gDAqBVvB,QAAQC,IAAR,MArBU,yBAuBVC,aAAY,kBAAM,EAAKqB,aAAc,KAvB3B,4EA5IL,6DAuKbhD,gBAvKa,uCAuKK,WAAOC,GAAP,eAAA3D,EAAA,6DACd,EAAKkI,gBAAiB,EADR,kBAGUtG,EAAMoB,SAASU,gBAAgB,EAAKV,SAAUe,SAAUJ,GAHlE,OAGNmE,EAHM,OAIVzC,aAAY,kBAAM,EAAKyC,QAAUA,KAJvB,gDAMV3C,QAAQC,IAAR,MANU,yBAQVC,aAAY,kBAAM,EAAK6C,gBAAiB,KAR9B,4EAvKL,sDACTtB,YAAmB5I,MAEnB6I,aACI,kBAAM,EAAKuB,aACX,SAACA,GACG,GAAiB,IAAdA,GAAiC,IAAdA,EAAgB,CAClC,IAAMzE,EAA0B,IAAdyE,EAAkB,YAAc,aAClD,EAAK1E,gBAAgBC,GAER,IAAdyE,GACC,EAAKlE,iBAAiB6C,QACtB,EAAKnD,mBAAmB,EAAKyE,mBAG7B,EAAKnE,iBAAiB6C,QACtB,EAAKe,QAAU,OAK3BjB,aACI,kBAAM,EAAKwB,mBACX,SAACA,GACG,EAAKnE,iBAAiB6C,QACtB,EAAKnD,mBAAmByE,M,kDASpC,WACI,OAAOlB,MAAMC,KAAKpJ,KAAKkG,iBAAiBmD,UACnCC,MAAK,SAACtH,EAAGuH,GAAJ,OAAUvH,EAAEtB,KAAM8I,UAAYD,EAAE7I,KAAM8I,e,yBA4BpD,WACI,SAAG7H,EAAOoB,UAAUyB,OAAQxE,KAAKgF,WACtBrD,EAAOoB,UAAUyB,KAAKuB,WAAa/F,KAAKgF,SAASe,a,KChF/CqF,E,WAMjB,aAAc,IAAD,gCALb5G,KAAoB,KAKP,KAJb6G,cAA+B,KAIlB,KAHbC,WAAqB,EAGR,KAFbC,yBAEa,OAQbhH,MARa,uCAQL,WAAOC,GAAP,eAAAxC,EAAA,+EAEqB4B,EAAMS,MAAME,MAAMC,GAFvC,OAEMwC,EAFN,OAGArF,EAAOC,YAAY4J,SAASxE,EAAOnF,OACnC,EAAK4J,uBAAuBzE,GAC5BK,aAAY,kBAAM,EAAK7C,KAAOwC,KAC9BvE,GAAQC,KAAK,eACbf,EAAO+J,WAAWC,aAPlB,uHARK,2DAqBblH,SArBa,uCAqBF,WAAOD,GAAP,SAAAxC,EAAA,+EAEG4B,EAAMS,MAAMI,SAASD,GAFxB,OAGH/B,GAAQC,KAAR,yCAA+C8B,EAAKM,QACpDnD,EAAO+J,WAAWC,aAJf,oHArBE,2DA+Bb3I,OAAS,WACLrB,EAAOC,YAAY4J,SAAS,MAC5BnE,aAAY,WACR,EAAK7C,KAAO,KACZ,EAAK6G,cAAgB,QAEzB5I,GAAQC,KAAK,MArCJ,KAwCbkJ,eAxCa,sBAwCI,4BAAA5J,EAAA,+EAEU4B,EAAMS,MAAMC,UAFtB,OAEHE,EAFG,OAGT6C,aAAY,kBAAM,EAAK7C,KAAOA,KAC9B7C,EAAOC,YAAY4J,SAAShH,EAAK3C,OACjC,EAAK4J,uBAAuBjH,GALnB,gDAOT2C,QAAQC,IAAR,MAPS,yDAxCJ,KAmDbyD,SAAW,SAACgB,GACR,EAAKrH,KAAMwB,UAAY6F,GApDd,KAuDbC,uBAvDa,sBAuDY,sBAAA9J,EAAA,sDACrB+J,OAAOC,GAAGC,gBAAe,SAAA3K,GACE,cAApBA,EAASc,SACR,EAAKiJ,cAAgB/J,EAAS4K,aAAavH,gBAH9B,2CAvDZ,KA+DbwH,cAAgB,WACZ,EAAKb,WAAY,EACjB,IAAMc,EAAW,SAACzH,GACdf,EAAMS,MAAMK,QAAQC,GAAapB,MAAK,SAAAiB,GAClC7C,EAAOC,YAAY4J,SAAShH,EAAK3C,OACjC,EAAK4J,uBAAuBjH,GAC5B6C,aAAY,WACR,EAAK7C,KAAOA,KAEhB/B,GAAQC,KAAK,kBACd2J,OAAM,SAAAlK,GAAK,OACVgF,QAAQC,IAAIjF,MACdmK,SAAQ,WACNjF,aAAY,kBAAM,EAAKiE,WAAY,SAIxC,EAAKD,cACJe,EAAS,EAAKf,eAGdU,OAAOC,GAAGzH,OAAM,SAAAjD,GAAQ,OACpB8K,EAAS9K,EAAS4K,aAAavH,eACnC,CAAC4H,MAAO,0BAtFH,KA0Fb3H,aA1Fa,sBA0FE,4BAAA5C,EAAA,6DACX,EAAKwK,wBADM,kBAGU5I,EAAMS,MAAMO,eAHtB,OAGHJ,EAHG,OAIP6C,aAAY,kBAAM,EAAK7C,KAAOA,KAC9B7C,EAAOC,YAAY4J,SAAShH,EAAK3C,OACjC,EAAK4J,uBAAuBjH,GANrB,kDAQP2C,QAAQC,IAAR,MARO,0DAzFXwB,YAAmB5I,M,4CAGvB,WACI,QAASA,KAAKwE,O,oCAiGlB,SAA+BA,GAC3B,IAAMiI,EAAWxK,KAAKC,MAAMwK,KAAKlI,EAAK3C,MAAM8K,MAAM,KAAK,KAEjDC,EADU,IAAI9E,KAAkB,IAAb2E,EAASI,KACVrD,UAAY1B,KAAKgF,MAAS,IAClD9M,KAAKuL,oBAAsBwB,WAAW/M,KAAK4E,aAAcgI,K,mCAG7D,WACII,aAAahN,KAAKuL,yB,KCzGb5J,EAAkB,CAC3BsJ,cAAe,IAAIhF,EACnBrE,YAAa,ICXb,aAAc,IAAD,gCAJbqL,YAAkC,KAIrB,KAHbpL,MAAuBkK,OAAOmB,aAAaC,QAAQ,OAGtC,KAFbC,WAAY,EAEC,KAebnK,eAAiB,SAACd,GACd,EAAK8K,YAAc9K,GAhBV,KAmBbqJ,SAAW,SAAC3J,GACR,EAAKA,MAAQA,GApBJ,KAuBbwL,aAAe,WACX,EAAKD,WAAY,GAvBjBxE,YAAmB5I,MAEnB6I,aACI,kBAAM,EAAKhH,SACX,SAACA,GACMA,EACCkK,OAAOmB,aAAaI,QAAQ,MAAOzL,GAGnCkK,OAAOmB,aAAaK,WAAW,WDE/CxK,UAAW,IAAIqI,EACfM,WAAY,IERZ,aAAc,IAAD,gCALb8B,MAAe,CACXC,MAAM,EACNjK,KAAM,MAGG,KAIbkK,UAAY,SAACC,GACT,EAAKH,MAAMC,MAAO,EAClB,EAAKD,MAAMhK,KAAOmK,GANT,KASbhC,WAAa,WACT,EAAK6B,MAAMC,MAAO,EAClB,EAAKD,MAAMhK,KAAO,MAVlBoF,YAAmB5I,OFQvB4N,cAAe,IAAI/D,EACnBgE,aAAc,IGdd,aAAc,IAAD,gCAHbC,SAA0B,GAGb,KAFbC,cAAsC,KAEzB,KAIbC,oBAAsB,SAACC,GAChBtM,EAAOsJ,cAAc7E,mBACpB,EAAK2H,eAAgB,IAAIG,KACpBC,QAAQ/M,WAAA,sBAAmD6M,GAAc,CACtEG,mBAAoB,kCAAMzM,EAAOoB,UAAUyB,YAAvB,aAAM,EAAuB3C,SAEpDwM,yBACAC,iBAAiBC,IAASC,aAC1BC,QAEL,EAAKV,cAAcW,QAAQrC,OAAM,SAAAlK,GAAK,OAAIgF,QAAQC,IAAI,0CAA2CjF,MAEjG,EAAK4L,cAAcY,GAAG,gBAAgB,SAACb,GACnCzG,aAAY,WACR,EAAKyG,SAAWA,EAASc,KAAI,SAAAC,GAEzB,OADAA,EAAQC,SAAW,IAAIhH,KAAK+G,EAAQC,SAAW,KACxCD,WAKnB,EAAKd,cAAcY,GAAG,kBAAkB,SAACE,GACrCA,EAAQC,SAAW,IAAIhH,KAAK+G,EAAQC,UACpCzH,aAAY,kBAAM,EAAKyG,SAASiB,QAAQF,WA3BvC,KAgCbG,kBAAoB,WAAO,IAAD,EACtB,YAAKjB,qBAAL,SAAoBkB,OAAO5C,OAAM,SAAAlK,GAAK,OAAIgF,QAAQC,IAAI,oCAAqCjF,OAjClF,KAoCb+M,cAAgB,WACZ,EAAKpB,SAAW,GAChB,EAAKkB,qBAtCI,KAyCbG,YAzCa,uCAyCC,WAAON,GAAP,iBAAA7M,EAAA,6DACV6M,EAAQZ,WAAR,UAAqBtM,EAAOsJ,cAAc7E,wBAA1C,aAAqB,EAAuCjG,GADlD,4BAGA,EAAK4N,qBAHL,aAGA,EAAoBqB,OAAO,cAAeP,GAH1C,sDAKN1H,QAAQC,IAAI,SALN,wDAzCD,sDACTwB,YAAmB5I,QHgBdqP,EAAeC,wBAAc3N,GAE3B,SAAS4N,IACpB,OAAOC,qBAAWH,G,WIvBPI,eAAS,WACpB,MAA8DF,IAAvDtE,EAAP,EAAOA,cAAP,IAAsBlI,UAAWyB,EAAjC,EAAiCA,KAAMxB,EAAvC,EAAuCA,OAAQ0M,EAA/C,EAA+CA,WAC/C,OACI,cAACC,EAAA,EAAD,CAAMC,UAAQ,EAACC,MAAQ,MAAvB,SACI,eAACC,EAAA,EAAD,WACI,eAACH,EAAA,EAAKI,KAAN,CAAWC,GAAIC,IAASC,GAAG,IAAIC,OAAK,EAACC,QAAM,EAA3C,UACI,qBAAKC,IAAI,mBAAmBC,IAAI,OAAOC,MAAS,CAACC,YAAa,MADlE,kBAICd,GACG,qCACI,cAACC,EAAA,EAAKI,KAAN,CAAWC,GAAIC,IAASC,GAAG,cAAcO,KAAO,eAChD,cAACd,EAAA,EAAKI,KAAN,UACI,cAACW,EAAA,EAAD,CAAQC,QAAS,kBAAM1F,EAAchD,wBAAwB+H,GAAIC,IAASC,GAAG,YAAYU,UAAQ,EAACjD,QAAU,sBAEhH,eAACgC,EAAA,EAAKI,KAAN,CAAWc,SAAS,QAApB,UACI,cAACC,EAAA,EAAD,CAAOT,KAAS,OAAJ7L,QAAI,IAAJA,OAAA,EAAAA,EAAMwB,YAAa,mBAAoB+K,QAAM,EAACC,OAAO,UACjE,cAACC,EAAA,EAAD,CAAUC,SAAS,WAAWC,KAAI,OAAE3M,QAAF,IAAEA,OAAF,EAAEA,EAAMsB,YAA1C,SACI,eAACmL,EAAA,EAAStB,KAAV,WACI,cAACsB,EAAA,EAASlB,KAAV,CAAeC,GAAIoB,IAAMlB,GAAE,2BAAe1L,QAAf,IAAeA,OAAf,EAAeA,EAAMuB,UAAYoL,KAAK,aAAaE,KAAK,SACnF,cAACJ,EAAA,EAASlB,KAAV,CAAeY,QAAS3N,EAAQmO,KAAK,SAASE,KAAK,6B,qDCpBxE5B,eAAS,WACpB,MAAmDF,IAA5CtE,cAAgBtF,EAAvB,EAAuBA,UAAWc,EAAlC,EAAkCA,aAElC,OACI,qCACI,eAACkJ,EAAA,EAAD,CAAM2B,UAAQ,EAACC,KAAK,QAAQhB,MAAO,CAACiB,MAAO,OAAQC,UAAW,MAA9D,UACI,cAACC,EAAA,EAAD,CAAQL,KAAK,SAASM,UAAQ,EAACC,MAAM,OAAOjE,QAAQ,YACpD,cAACgC,EAAA,EAAKI,KAAN,CACIpC,QAAQ,iBACRkE,OAASlM,EAAUmM,IAAI,OACvBnB,QAAS,kBAAMlK,EAAa,MAAO,WAEvC,cAACkJ,EAAA,EAAKI,KAAN,CACIpC,QAAQ,YACRkE,OAASlM,EAAUmM,IAAI,WACvBnB,QAAS,kBAAMlK,EAAa,UAAW,WAE3C,cAACkJ,EAAA,EAAKI,KAAN,CACIpC,QAAQ,cACRkE,OAASlM,EAAUmM,IAAI,UACvBnB,QAAS,kBAAMlK,EAAa,SAAU,cAG9C,cAACiL,EAAA,EAAD,IACA,cAAC,IAAD,CACIK,SAAU,SAACrR,GAAD,OAAgB+F,EAAa,YAAa/F,IACpDgG,MAAOf,EAAUrC,IAAI,qB,+ECtBtBmM,gBAAS,YAAyC,IAAD,EAAjBzK,EAAiB,EAAjBA,SAC3C,EAAmEuK,IAAnE,IAAO3B,cAAgB7C,EAAvB,EAAuBA,gBAAiBrC,EAAxC,EAAwCA,YAExC,IAAG,UAFH,EAAsD3F,UAEzCyB,YAAV,eAAgBuB,YAAaf,EAASe,SAAU,OAAO,KAO1D,OACI,eAACiM,GAAA,EAAD,CAAQC,SAAS,OAAjB,UACI,cAACD,GAAA,EAAOE,QAAR,CAAgBC,SAAO,EAAC5B,MAAO,CAACiB,MAAO,QAAvC,SACI,cAACd,EAAA,EAAD,CACI0B,OAAK,EACLR,MAAM,OACNjE,QAAS3I,EAAS0D,YAAc,YAAc,iBAEtD,cAACsJ,GAAA,EAAOE,QAAR,CAAgBG,QAAM,EAAC9B,MAAO,CAACiB,MAAO,QAAtC,SACI,cAACd,EAAA,EAAD,CACI4B,OAAK,EACLF,OAAK,EACLR,MAAQ5M,EAAS0D,YAAc,MAAQ,QACvCiF,QAAU3I,EAAS0D,YAAc,WAAa,SAC9C6J,QAAS7J,EACTiI,QAAW,SAAA6B,GAAC,OApB5B,SAAsBA,EAAmBvN,GACrCuN,EAAEC,iBACF1H,EAAgB9F,GAAWD,EAAS0D,aAkBRgK,CAAaF,EAAGxN,EAASe,qBCvB9C0J,gBAAS,YAAyC,IAAlBzK,EAAiB,EAAjBA,SAEpCjC,EAAawM,IAAbxM,UAEP,OACI,eAAC4P,GAAA,EAAD,CAAM3C,GAAIoB,IAAMlB,GAAE,oBAAelL,EAASe,UAAY6L,MAAO5M,EAAS0D,YAAc,SAAU,OAA9F,UACI,eAACiK,GAAA,EAAKT,QAAN,WACI,cAACpB,EAAA,EAAD,CAAOS,KAAK,OAAOqB,QAAQ,QAAQC,SAAO,EAACC,IAAI,EAAMzC,IAAKrL,EAASgB,WAAa,qBAChF,cAAC2M,GAAA,EAAKjB,OAAN,UAAc1M,EAASc,cACvB,cAAC6M,GAAA,EAAKI,YAAN,+BAEJ,eAACJ,GAAA,EAAKT,QAAN,CAAcc,OAAK,EAAnB,UACI,cAACC,GAAA,EAAD,CAAMxC,KAAK,SACVzL,EAAS2D,eAFd,gBAIC3D,EAASe,WAAahD,EAAUyB,KAAMuB,UACnC,cAAC4M,GAAA,EAAKT,QAAN,CAAcc,OAAK,EAAnB,SACI,cAAC,GAAD,CAAchO,SAAUA,YCnB7ByK,gBAAS,YAAkD,IAAnBlI,EAAkB,EAAlBA,UAC7C2L,EAAS,CACXC,YAAa,SACbC,YAAa,EACbC,OAAQ,WAGZ,OACI,cAACC,GAAA,EAAD,CAAMC,YAAU,EAAhB,SACKhM,EAAUqH,KAAI,SAAAnH,GAAQ,OACnB,cAAC+L,GAAA,EAAD,CACIC,WAAS,EAETC,QACI,cAACJ,GAAA,EAAKvD,KAAN,UACI,cAACe,EAAA,EAAD,CACIS,KAAK,OACLoC,UAAQ,EACRtD,IAAK5I,EAASzB,WAAa,mBAC3B4N,UAAQ,EACRrD,MAAO9I,EAASiB,YAAcwK,EAAS,CAACG,OAAQ,cANxC5L,EAAS1B,UAJjC,SAeI,cAACyN,GAAA,EAAMtB,QAAP,UACI,cAAC,GAAD,CAAalN,SAAUyC,OAdtBA,EAAS1B,kBCXnB,SAAS8N,GAAT,GAAyC,IAAD,MAAjB3T,EAAiB,EAAjBA,SAClC,OACI,eAAC4T,GAAA,EAAQC,MAAT,WACI,eAACD,GAAA,EAAD,WACK5T,EAASsI,aACN,cAACwL,GAAA,EAAD,CAAOrC,SAAS,MAAMC,MAAM,MAAMjE,QAAQ,YAAY4C,MAAO,CAAC0D,UAAW,YAE7E,cAAClE,GAAA,EAAKgE,MAAN,UACI,eAAChE,GAAA,EAAD,WACI,cAACA,GAAA,EAAKe,MAAN,CAAYP,MAAO,CAAC2D,aAAc,GAAI3C,KAAK,OAAOoC,UAAQ,EAACtD,KAAK,UAAAnQ,EAAS0H,YAAT,eAAe5B,YAAa,qBAC5F,eAAC+J,GAAA,EAAKmC,QAAN,WACI,cAACnC,GAAA,EAAK2B,OAAN,CAAa1B,GAAIoB,IAAMlB,GAAE,mBAAchQ,EAASC,IAAhD,SACKD,EAASG,QAEd,eAAC0P,GAAA,EAAKgD,YAAN,wBACc,cAAC,IAAD,CAAM7C,GAAE,6BAAchQ,EAAS0H,YAAvB,aAAc,EAAe7B,UAArC,SAAiD,2CAAS7F,EAAS0H,YAAlB,aAAS,EAAe9B,mBAEtF5F,EAASwH,QACN,cAACqI,GAAA,EAAKgD,YAAN,UACI,cAACiB,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,SAAnB,+CAKP1R,EAASoH,UAAYpH,EAASwH,QAC3B,cAACqI,GAAA,EAAKgD,YAAN,UACI,cAACiB,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,QAAnB,2DASxB,cAACkC,GAAA,EAAD,UACI,iCACI,cAACb,GAAA,EAAD,CAAMxC,KAAK,UAAU7G,kBAAO1J,EAASQ,KAAO,uBAC5C,cAACuS,GAAA,EAAD,CAAMxC,KAAK,WAAWvQ,EAASO,WAGvC,cAACqT,GAAA,EAAD,CAASK,WAAS,EAAlB,SACI,cAAC,GAAD,CAAsB5M,UAAWrH,EAASqH,cAE9C,eAACuM,GAAA,EAAD,CAASM,UAAQ,EAAjB,UACI,+BAAOlU,EAASK,cAChB,cAACmQ,EAAA,EAAD,CACIV,GAAIoB,IACJlB,GAAE,mBAAchQ,EAASC,IACzByR,MAAM,OACNgB,QAAQ,QACRjF,QAAQ,eCxDb8B,oBAAS,WACpB,IAAOxE,EAAiBsE,IAAjBtE,cACP,OACI,mCACKA,EAAcoJ,kBAAkBzF,KAAI,mCAAE0F,EAAF,KAASzQ,EAAT,YACjC,eAAC,WAAD,WACI,cAAC6N,EAAA,EAAD,CAAQ6C,KAAG,EAAC3C,MAAM,OAAlB,SACK0C,IAEJzQ,EAAW+K,KAAI,SAAA1O,GAAQ,OACpB,cAAC2T,GAAD,CAAgC3T,SAAUA,GAAvBA,EAASC,SALrBmU,W,UCRhB,SAASE,KACpB,OACI,cAAC,WAAD,UACI,cAACC,GAAA,EAAD,CAAarC,OAAK,EAAC7B,MAAO,CAAEkB,UAAW,IAAvC,SACI,eAACqC,GAAA,EAAQC,MAAT,WACI,cAACD,GAAA,EAAD,CAASvD,MAAO,CAAEmE,UAAW,KAA7B,SACI,eAACD,GAAA,EAAD,WACI,eAACA,GAAA,EAAY/C,OAAb,CAAoBiD,OAAK,EAAzB,UACI,cAACF,GAAA,EAAYG,KAAb,IACA,cAACH,GAAA,EAAYG,KAAb,OAEJ,cAACH,GAAA,EAAYI,UAAb,UACI,cAACJ,GAAA,EAAYG,KAAb,WAIZ,cAACd,GAAA,EAAD,UACI,eAACW,GAAA,EAAD,WACI,cAACA,GAAA,EAAYG,KAAb,IACA,cAACH,GAAA,EAAYG,KAAb,SAGR,cAACd,GAAA,EAAD,CAASK,WAAS,EAAC5D,MAAO,CAAEmE,UAAW,MACvC,cAACZ,GAAA,EAAD,CAASM,UAAQ,EAAjB,SACI,cAAC1D,EAAA,EAAD,CAAQoE,UAAQ,EAAClD,MAAM,OAAOgB,QAAQ,QAAQjF,QAAQ,kBCjB/D8B,oBAAS,WACpB,IAAOxE,EAAiBsE,IAAjBtE,cACP,EAAsC8J,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAYA,OAJAC,qBAAU,WACNjK,EAAcnE,mBACf,CAACmE,IAGA,eAACkK,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAM,KAAnB,SACKvG,EAAc5E,YAAc2O,EACzB,qCACI,cAACR,GAAD,IACA,cAACA,GAAD,IACA,cAACA,GAAD,OAGJ,cAAC,IAAD,CACIa,UAAW,EACXC,SAtBpB,WACIL,GAAe,GACfhK,EAAcpE,gBAAgB,IAAI/F,EAAamK,EAAcpK,WAAY0U,YAAc,IACvFtK,EAAcnE,iBAAiBvD,MAAK,kBAAM0R,GAAe,OAoBzCO,SAAUR,KAAiB/J,EAAcpK,YAAcoK,EAAcpK,WAAW0U,YAActK,EAAcpK,WAAW4U,WACvHC,aAAa,EAJjB,SAMI,cAAC,GAAD,QAKZ,cAACP,EAAA,EAAKC,OAAN,CAAa5D,MAAM,IAAnB,SACI,cAAC,EAAD,MAEJ,cAAC2D,EAAA,EAAKC,OAAN,CAAa5D,MAAM,KAAnB,SACKwD,GACG,qCACI,cAACR,GAAD,IACA,cAACA,GAAD,IACA,cAACA,GAAD,e,sCC1CT,SAASmB,GAAYC,GAChC,MAAsBC,aAASD,EAAMnF,MAArC,mBAAOqF,EAAP,KAAcC,EAAd,KACA,OACI,eAACC,GAAA,EAAD,CAAW7T,MAAO4T,EAAKE,WAAaF,EAAK5T,MAAzC,UACI,gCAAQyT,EAAMM,QACd,iDAAWJ,GAAWF,IACrBG,EAAKE,SAAWF,EAAK5T,MAClB,cAAC6R,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,MAAnB,SAA0BmE,EAAK5T,QAC/B,QCZDsN,oBAAS,WACpB,IAAO1M,EAAawM,IAAbxM,UACP,OACI,cAAC,KAAD,CACIoT,cAAe,CAACrR,MAAO,GAAIsR,SAAU,GAAIjU,MAAO,MAChDkU,SAAY,SAAChN,EAAD,OAAUiN,EAAV,EAAUA,UAAV,OAAwBvT,EAAUwB,MAAM8E,GAAQgD,OAAM,SAAAlK,GAAK,OAAImU,EAAU,CAACnU,MAAOA,EAAMb,SAASV,WAFhH,SAIK,gBAAE2V,EAAF,EAAEA,aAAcjQ,EAAhB,EAAgBA,aAAckQ,EAA9B,EAA8BA,MAAOjU,EAArC,EAAqCA,OAArC,OACG,eAAC,KAAD,CAAMkU,UAAU,UAAUJ,SAAUE,EAAcG,aAAa,MAA/D,UACI,cAAChF,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAU,wBAAwBiE,MAAM,OAAOqC,UAAU,WACzE,cAAC0B,GAAD,CAAalF,KAAK,QAAQkG,YAAY,UACtC,cAAChB,GAAD,CAAalF,KAAK,WAAWkG,YAAY,WAAWC,KAAK,aACzD,cAAC,KAAD,CACInG,KAAK,QAAQoG,OAAQ,kBAAM,cAAC7C,GAAA,EAAD,CAAOzD,MAAO,CAAC2D,aAAc,IAAK5B,OAAK,EAACV,MAAM,MAAMjE,QAASpL,EAAOJ,WAEnG,cAACuO,EAAA,EAAD,CACIoE,SAAYxO,IAAiBkQ,EAC7BjE,QAASjM,EACTsK,UAAQ,EACRgG,KAAK,SACLjJ,QAAQ,SACRyE,OAAK,a,mBCrBd,SAAS0E,GAAT,GAA0C,IAAhBvU,EAAe,EAAfA,OACrC,OACI,cAACwU,GAAA,EAAD,CAAS5U,OAAK,EAAd,SACKI,GACG,cAACwU,GAAA,EAAQzD,KAAT,UACK/Q,EAAOqM,KAAI,SAACzM,EAAY6U,GAAb,OACR,cAACD,GAAA,EAAQhH,KAAT,UAAuB5N,GAAJ6U,UCJ5BvH,oBAAS,WACpB,IAAO1M,EAAawM,IAAbxM,UAEDkU,EAAmBC,KAAW,CAChCpR,YAAaoR,OAAaC,SAAS,kCACnCpR,SAAUmR,OAAaC,SAAS,8BAChCrS,MAAOoS,OAAaC,SAAS,8BAA8BrS,MAAM,iCACjEsR,SAAUc,OAAaC,SAAS,8BAA8BC,QAAQ,yCAA0C,qFAGpH,OACI,cAAC,KAAD,CACIjB,cAAe,CAACrQ,YAAa,GAAKC,SAAU,GAAIjB,MAAO,GAAIsR,SAAU,GAAIjU,MAAO,MAChFkU,SAAY,SAAChN,EAAD,OAAUiN,EAAV,EAAUA,UAAV,OACRvT,EAAU0B,SAAS4E,GAAQgD,OAAM,SAAAlK,GAAK,OAAImU,EAAU,CAACnU,cAEzD8U,iBAAoBA,EALxB,SAOK,gBAAEV,EAAF,EAAEA,aAAcjQ,EAAhB,EAAgBA,aAAckQ,EAA9B,EAA8BA,MAAOa,EAArC,EAAqCA,QAAS9U,EAA9C,EAA8CA,OAA9C,OACG,eAAC,KAAD,CAAMkU,UAAU,gBAAgBJ,SAAUE,EAAcG,aAAa,MAArE,UACI,cAAChF,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAU,2BAA2BiE,MAAM,OAAOqC,UAAU,WAC5E,cAAC0B,GAAD,CAAalF,KAAK,cAAckG,YAAY,iBAC5C,cAAChB,GAAD,CAAalF,KAAK,QAAQkG,YAAY,UACtC,cAAChB,GAAD,CAAalF,KAAK,WAAWkG,YAAY,aACzC,cAAChB,GAAD,CAAalF,KAAK,WAAWkG,YAAY,WAAWC,KAAK,aACzD,cAAC,KAAD,CACInG,KAAK,QAAQoG,OAAQ,kBAAM,cAACC,GAAD,CAAiBvU,OAAQA,EAAOJ,WAE/D,cAACuO,EAAA,EAAD,CACIoE,SAAYxO,IAAiBkQ,IAAUa,EACvC9E,QAASjM,EACTsK,UAAQ,EACRgG,KAAK,SACLjJ,QAAQ,WACRyE,OAAK,aCnCd3C,gBAAS,WACpB,MAAgCF,IAAzBxM,EAAP,EAAOA,UAAW2I,EAAlB,EAAkBA,WAClB,OACI,cAACoI,GAAA,EAAD,CAASlE,UAAQ,EAACqE,UAAU,SAAS3C,UAAQ,EAACmF,UAAU,WAAxD,SACI,eAAC3G,EAAA,EAAD,CAAWqB,MAAI,EAAf,UACI,eAACO,EAAA,EAAD,CAAQ1B,GAAG,KAAKJ,UAAQ,EAAxB,UACI,cAACkB,EAAA,EAAD,CAAOS,KAAK,UAAUlB,IAAI,mBAAmBC,IAAI,OAAOC,MAAO,CAAC2D,aAAc,MADlF,kBAICnR,EAAU2M,WACP,qCACI,cAACgC,EAAA,EAAD,CAAQ1B,GAAG,KAAKJ,UAAQ,EAACjC,QAAQ,4BACjC,cAAC+C,EAAA,EAAD,CAAQV,GAAIoB,IAAMlB,GAAG,cAAcqB,KAAK,OAAO3B,UAAQ,EAAvD,mCAKJ,qCACI,cAACc,EAAA,EAAD,CAAQC,QAAS,kBAAMjF,EAAWgC,UAAU,cAAC,GAAD,MAAe6D,KAAK,OAAO3B,UAAQ,EAA/E,mBAGA,cAACc,EAAA,EAAD,CAAQC,QAAS,kBAAMjF,EAAWgC,UAAU,cAAC,GAAD,MAAkB6D,KAAK,OAAO3B,UAAQ,EAAlF,sBAGA,cAAC0H,GAAA,EAAD,CAAS/D,YAAU,EAAC3D,UAAQ,EAA5B,gBACA,cAACc,EAAA,EAAD,CACIa,KAAK,OACL3B,UAAQ,EACRgC,MAAM,WACNjE,QAAQ,sBACRgD,QAAS5N,EAAUoJ,cACnBoG,QAASxP,EAAUuI,uB,oBC/BhC,SAASiM,GAAT,GAA+D,IAAD,IAA5C3H,gBAA4C,aAA7BjC,eAA6B,MAArB,aAAqB,EACzE,OACI,cAAC6J,GAAA,EAAD,CAAQ3F,QAAM,EAACjC,SAAUA,EAAzB,SACI,cAAC6H,GAAA,EAAD,CAAQlG,KAAK,QAAb,SAAsB5D,MCAnB,SAAS+J,GAAW9B,GAC/B,MAAsBC,aAASD,EAAMnF,MAArC,mBAAOqF,EAAP,KAAcC,EAAd,KACA,OACI,eAACC,GAAA,EAAD,CAAW7T,MAAO4T,EAAKE,WAAaF,EAAK5T,MAAzC,UACI,gCAAQyT,EAAMM,QACd,oDAAcJ,GAAWF,IACxBG,EAAKE,SAAWF,EAAK5T,MAClB,cAAC6R,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,MAAnB,SAA0BmE,EAAK5T,QAC/B,Q,cCRD,SAASwV,GAAc/B,GAClC,MAA+BC,aAASD,EAAMnF,MAA9C,mBAAOqF,EAAP,KAAcC,EAAd,KAAoB6B,EAApB,KACA,OACI,eAAC5B,GAAA,EAAD,CAAW7T,MAAO4T,EAAKE,WAAaF,EAAK5T,MAAzC,UACI,gCAAQyT,EAAMM,QACd,cAAC2B,GAAA,EAAD,CACIC,WAAS,EACTC,QAAWnC,EAAMmC,QACjBpB,YAAef,EAAMe,YACrBjQ,MAAOoP,EAAMpP,OAAS,KACtBqL,SAAU,SAACS,EAAEwF,GAAH,OAASJ,EAAQK,SAASD,EAAEtR,QACtCwR,OAAQ,kBAAMN,EAAQO,YAAW,MAEpCpC,EAAKE,SAAWF,EAAK5T,MAClB,cAAC6R,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,MAAnB,SAA0BmE,EAAK5T,QAC/B,QC1BT,IAAMiW,GAAkB,CAC3B,CAACjH,KAAK,SAASzK,MAAO,UACtB,CAACyK,KAAK,UAAUzK,MAAO,WACvB,CAACyK,KAAK,OAAOzK,MAAO,QACpB,CAACyK,KAAK,OAAOzK,MAAO,QACpB,CAACyK,KAAK,QAAQzK,MAAO,SACrB,CAACyK,KAAK,SAASzK,MAAO,W,qBCDX,SAASiP,GAAYC,GAChC,MAA+BC,aAASD,EAAMnF,MAA9C,mBAAOqF,EAAP,KAAcC,EAAd,KAAoB6B,EAApB,KACA,OACI,eAAC5B,GAAA,EAAD,CAAW7T,MAAO4T,EAAKE,WAAaF,EAAK5T,MAAzC,UACI,cAAC,KAAD,uCACQ2T,GACAF,GAFR,IAGIyC,SAAWvC,EAAMpP,OAAS,IAAIoB,KAAKgO,EAAMpP,QAAW,KACpDqL,SAAU,SAAArL,GAAK,OAAIkR,EAAQK,SAASvR,OAEvCqP,EAAKE,SAAWF,EAAK5T,MAClB,cAAC6R,GAAA,EAAD,CAAO1B,OAAK,EAACV,MAAM,MAAnB,SAA0BmE,EAAK5T,QAC/B,QCDDsN,oBAAS,WACpB,IAAOxE,EAAiBsE,IAAjBtE,cACA9K,EAAMmY,eAANnY,GAEP,EAAgC4U,mBAA6B,IAAI9U,GAAjE,mBAAOC,EAAP,KAAiB+G,EAAjB,KAEMgQ,EAAmBC,KAAW,CAChC7W,MAAO6W,OAAaC,SAAS,oCAC7B5W,YAAa2W,OAAaC,SAAS,0CACnC7W,SAAU4W,OAAaC,WACvB3W,KAAM0W,OAAaC,SAAS,0BAC5B1W,MAAOyW,OAAaC,SAAS,2BAC7BzW,KAAMwW,OAAWqB,WAAWpB,SAAS,qCAkBzC,OARAjC,qBAAU,WACH/U,GACC8K,EAAclD,mBAAmB5H,GAAIoD,MAAK,SAACrD,GACvC+G,EAAY,IAAIhH,EAAmBC,SAG5C,CAAC+K,EAAe9K,KAEf8K,EAAc7E,kBAAoBjG,EAAW,cAACoX,GAAD,CAAS5J,QAAU,+BAGhE,cAACmG,GAAA,EAAD,CAASM,UAAQ,EAAjB,SACI,cAAC,KAAD,CAAQ6C,iBAAkBA,EAAkBuB,oBAAkB,EAACrC,cAAejW,EAAUmW,SAAU,SAAAhN,GAAM,OAnBhH,SAA0BnJ,GACtB+K,EAAc/C,eAAehI,GAAUqD,MAAK,WACxCd,GAAQC,KAAR,mBAAyBuI,EAAc7E,iBAAkBjG,QAiBmDsY,CAAiBpP,IAA7H,SACK,gBAAEkN,EAAF,EAAEA,aAAcjQ,EAAhB,EAAgBA,aAAc+Q,EAA9B,EAA8BA,QAASb,EAAvC,EAAuCA,MAAvC,OACG,eAAC,KAAD,CAAMC,UAAU,UAAUJ,SAAUE,EAAcG,aAAa,MAA/D,UACI,cAAChF,EAAA,EAAD,CAAQ/D,QAAQ,mBAAmB4G,KAAG,EAAC3C,MAAM,SAC7C,cAAC+D,GAAD,CAAalF,KAAK,QAAQkG,YAAY,UACtC,cAACe,GAAD,CAAYgB,KAAM,EAAG/B,YAAY,cAAclG,KAAK,gBACpD,cAACkH,GAAD,CAAeI,QAASK,GAAiBzB,YAAY,WAAWlG,KAAK,aACrE,cAAC,GAAD,CACIkI,gBAAgB,OAChBlI,KAAK,OACLmI,gBAAc,EACdC,YAAY,OACZC,WAAW,wBAEf,cAACpH,EAAA,EAAD,CAAQ/D,QAAQ,mBAAmB4G,KAAG,EAAC3C,MAAM,SAC7C,cAAC+D,GAAD,CAAagB,YAAY,OAAOlG,KAAK,SACrC,cAACkF,GAAD,CAAagB,YAAY,QAAQlG,KAAK,UACtC,cAACC,EAAA,EAAD,CACIoE,SAAYxO,IAAiBkQ,IAAUa,EACvC9E,QAASjM,EACTsM,QAAQ,QACRhC,UAAQ,EACRgG,KAAK,SACLjJ,QAAQ,WAEZ,cAAC+C,EAAA,EAAD,CAAQV,GAAIoB,IAAMlB,GAAG,cAAc0C,QAAQ,QAAQgE,KAAK,SAASjJ,QAAQ,sB,oBClElF8B,gBAAS,WACpB,IAAOtP,EAAMmY,eAANnY,GAEP,EAAkCoP,IAA3B1B,EAAP,EAAOA,aAAc9K,EAArB,EAAqBA,UAErBmS,qBAAU,WAIN,OAHG/U,GACC0N,EAAaG,oBAAoB7N,GAE9B,kBAAM0N,EAAaqB,mBAC3B,CAACrB,EAAc1N,IAElB,IAAM8W,EAAmBC,KAAW,CAChC1T,KAAM0T,OAAaC,SAAS,mCAGhC,OACI,qCACI,cAACrD,GAAA,EAAD,CACIG,UAAU,SACVtC,SAAS,MACT/B,UAAQ,EACRgC,MAAM,OACNrB,MAAO,CAACwI,OAAQ,QALpB,SAOI,cAACrH,EAAA,EAAD,sCAEJ,cAACoC,GAAA,EAAD,CAASnC,UAAQ,EAACyC,UAAQ,EAA1B,SACI,eAAC4E,GAAA,EAAQjF,MAAT,WACKlG,EAAaC,SAASc,KAAI,SAAAC,GAAO,aAC9B,eAACmK,GAAA,EAAD,WACI,cAACA,GAAA,EAAQC,OAAT,CAAgB5I,IAAKxB,EAAQnE,OAAS,qBACtC,eAACsO,GAAA,EAAQ9G,QAAT,WACKrD,EAAQ9I,YAAR,UAAqBhD,EAAUyB,YAA/B,aAAqB,EAAgBuB,WAClC,cAAC2K,EAAA,EAAD,CACI4B,OAAK,EACLV,MAAM,MACNP,KAAK,QACLuB,QAAQ,QACRrB,KAAK,SAIb,cAACyH,GAAA,EAAQE,OAAT,CAAgBlJ,GAAIoB,IAAMlB,GAAE,oBAAerB,EAAQ9I,UAAnD,SACI,iCAAS8I,EAAQ/I,gBAErB,cAACkT,GAAA,EAAQG,SAAT,UACI,8BAAMC,aAAoBvK,EAAQC,UAAY,WAElD,cAACkK,GAAA,EAAQK,KAAT,CAAc9I,MAAO,CAAC+I,WAAY,YAAlC,SACKzK,EAAQrL,YApBPqL,EAAQ1O,OA2B1B,cAAC,KAAD,CACIkW,SAAU,SAAChN,EAAD,OAAUkQ,EAAV,EAAUA,UAAV,OACN1L,EAAasB,YAAY9F,GAAQ9F,MAAK,kBAAMgW,QAChDpD,cAAe,CAAC3S,KAAM,IACtByT,iBAAkBA,EAJtB,SAMK,gBAAE3Q,EAAF,EAAEA,aAAc+Q,EAAhB,EAAgBA,QAASd,EAAzB,EAAyBA,aAAzB,OACG,cAAC,KAAD,CAAME,UAAU,UAAUlG,MAAO,CAACkB,UAAW,IAA7C,SACI,cAAC,KAAD,CAAOhB,KAAK,OAAZ,SACK,SAACmF,GAAD,OACG,sBAAKrF,MAAO,CAACM,SAAU,YAAvB,UACI,cAAC4G,GAAA,EAAD,CAAQ5F,OAAQvL,IAChB,kDACIqQ,YAAY,4DACZ+B,KAAM,GACF9C,EAAME,OAHd,IAII0D,WAAY,SAAAhH,GACK,UAAVA,EAAE5P,KAAmB4P,EAAEiH,UAGb,UAAVjH,EAAE5P,KAAoB4P,EAAEiH,WACvBjH,EAAEC,iBACF4E,GAAWd,+BChF7DmD,GAAqB,CACvBpR,OAAQ,mBAGNqR,GAAyB,CAC3B9I,SAAU,WACV+I,OAAQ,KACRC,KAAM,KACNrI,MAAO,OACPsI,OAAQ,OACRlI,MAAO,SAOInC,gBAAU,YAAmD,IAAD,IAAlBvP,EAAkB,EAAlBA,SACrD,EAAgFqP,IAAzEtE,cAAgB5C,EAAvB,EAAuBA,iBAAkB/B,EAAzC,EAAyCA,aAAciC,EAAvD,EAAuDA,qBACvD,OACI,eAACuL,GAAA,EAAQC,MAAT,WACI,eAACD,GAAA,EAAD,CAASxB,OAAK,EAACX,SAAS,MAAMpB,MAAO,CAACwJ,QAAS,KAA/C,UACK7Z,EAASsI,aACN,cAACwL,GAAA,EAAD,CAAOzD,MAAO,CAACM,SAAU,WAAYmJ,OAAQ,IAAMH,MAAO,GAAII,IAAK,IAAKC,QAAM,EAACtI,MAAM,MAAMjE,QAAQ,cAEvG,cAACmD,EAAA,EAAD,CAAOT,IAAG,iCAA4BnQ,EAASI,SAArC,QAAqD8R,OAAK,EAAC7B,MAAOmJ,KAC5E,cAAC5F,GAAA,EAAD,CAASvD,MAAOoJ,GAAwBrH,OAAK,EAA7C,SACI,cAACvC,GAAA,EAAKgE,MAAN,UACI,cAAChE,GAAA,EAAD,UACI,eAACA,GAAA,EAAKmC,QAAN,WACI,cAACR,EAAA,EAAD,CACIH,KAAK,OACL5D,QAASzN,EAASG,MAClBkQ,MAAO,CAACqB,MAAO,WAEnB,4BAAIhI,kBAAO1J,EAASQ,KAAO,iBAC3B,0CAEI,cAAC,IAAD,CAAMwP,GAAE,6BAAchQ,EAAS0H,YAAvB,aAAc,EAAe7B,UAArC,SACI,iDAAU7F,EAAS0H,YAAnB,aAAU,EAAe9B,gCAQrD,cAACgO,GAAA,EAAD,CAASM,UAAQ,EAACzC,SAAS,SAA3B,SACKzR,EAASwH,OACN,qCACI,cAACgJ,EAAA,EAAD,CACIkB,MAAO1R,EAASsI,YAAc,QAAU,MACxCoK,QAAQ,OACRN,OAAK,EACL3E,QAASzN,EAASsI,YAAc,uBAAyB,kBACzDmI,QAASpI,EACTgK,QAAWjM,IAEf,cAACoK,EAAA,EAAD,CAAQoE,SAAU5U,EAASsI,YAAaoJ,MAAM,SAASgB,QAAQ,QAAQ5C,GAAIoB,IAAMlB,GAAE,oBAAehQ,EAASC,IAA3G,6BAKJD,EAASoH,QACT,cAACoJ,EAAA,EAAD,CACIC,QAAW,kBAAMtI,EAAiBnI,EAASC,KAC3CoS,QAAWjM,EAFf,gCAKA,cAACoK,EAAA,EAAD,CACIC,QAAW,kBAAMtI,EAAiBnI,EAASC,KAAKyR,MAAM,OACtDW,QAAWjM,EACXwO,SAAU5U,EAASsI,YAHvB,mCCnELiH,gBAAS,YAAiD,IAAnBvP,EAAkB,EAAlBA,SAClD,OACI,eAAC4T,GAAA,EAAQC,MAAT,WACI,cAACD,GAAA,EAAD,CAASnC,SAAS,MAAlB,SACI,eAACwD,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,SACI,cAACyB,GAAA,EAAD,CAAM1B,KAAK,QAAQK,MAAM,OAAOnB,KAAK,WAEzC,cAAC0E,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,4BAAItR,EAASK,qBAIzB,cAACuT,GAAA,EAAD,CAASnC,UAAQ,EAAjB,SACI,eAACwD,EAAA,EAAD,CAAMgF,cAAc,SAApB,UACI,cAAChF,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,SACI,cAACyB,GAAA,EAAD,CAAMxC,KAAK,WAAWc,KAAK,QAAQK,MAAM,WAE7C,cAACuD,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,+BACK5H,kBAAO1J,EAASQ,KAAO,gCAKxC,cAACoT,GAAA,EAAD,CAASnC,UAAQ,EAAjB,SACI,eAACwD,EAAA,EAAD,CAAMgF,cAAc,SAApB,UACI,cAAChF,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,SACI,cAACyB,GAAA,EAAD,CAAMxC,KAAK,SAASc,KAAK,QAAQK,MAAM,WAE3C,cAACuD,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,iCAAOtR,EAASO,MAAhB,KAAyBP,EAASM,qBC/B3CiP,gBAAS,YAAyE,IAAD,IAAtCvP,SAAYqH,EAA0B,EAA1BA,UAAWK,EAAe,EAAfA,KAC7E,IAAIL,EAAW,OAAO,KACtB,IAAM6S,EAAiB7S,EAAU8S,OACjC,OACI,qCACI,eAACvG,GAAA,EAAD,CACIG,UAAU,SACV1D,MAAO,CAAEwI,OAAQ,QACjBpH,SAAS,MACTwC,WAAS,EACTvE,UAAQ,EACRgC,MAAM,OANV,UAQKwI,EARL,IAQyC,IAAnBA,EAAuB,gBAAkB,mBAE/D,cAACtG,GAAA,EAAD,CAASnC,UAAQ,EAAjB,SACI,cAAC2B,GAAA,EAAD,CAAMgH,SAAO,EAACC,SAAO,EAArB,SACKhT,EAAUqH,KAAI,SAACnH,GAAD,OACX,eAACsI,GAAA,EAAD,CAAMQ,MAAO,CAAEM,SAAU,YAAzB,WACS,OAAJjJ,QAAI,IAAJA,OAAA,EAAAA,EAAM7B,YAAa0B,EAAS1B,UACzB,cAACiO,GAAA,EAAD,CACIzD,MAAO,CAAEM,SAAU,YACnBe,MAAM,SACNsI,OAAO,QAHX,kBAQJ,cAACpJ,EAAA,EAAD,CAAOS,KAAK,OAAOlB,IAAK5I,EAASzB,WAAa,qBAC9C,eAAC+J,GAAA,EAAKmC,QAAN,CAAciI,cAAc,SAA5B,UACI,cAACpK,GAAA,EAAK2B,OAAN,CAAa1B,GAAG,KAAhB,SACI,cAAC,IAAD,CAAME,GAAE,oBAAezI,EAAS1B,UAAhC,SAA6C0B,EAAS3B,gBAEzD2B,EAASiB,aAAgB,cAACqH,GAAA,EAAKyK,MAAN,CAAYjK,MAAO,CAAEqB,MAAO,UAA5B,4BAfUnK,EAAS1B,uBChB9D0J,gBAAS,WACpB,IAAOxE,EAAiBsE,IAAjBtE,cACA7E,EAA0C6E,EAA1C7E,iBAAkB6B,EAAwBgD,EAAxBhD,qBAClB9H,EAAMmY,eAANnY,GAQP,OAPA+U,qBAAU,WAIN,OAHG/U,GACC8K,EAAclD,mBAAmB5H,GAE9B,kBAAM8H,OACf,CAACgD,EAAe9K,EAAI8H,IAElB7B,EAGA,eAAC+O,EAAA,EAAD,WACI,eAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,UACI,cAAC,GAAD,CAAuBtR,SAAUkG,IACjC,cAAC,GAAD,CAAqBlG,SAAUkG,IAC/B,cAAC,GAAD,OAEJ,cAAC+O,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,SACI,cAAC,GAAD,CAAwBtR,SAAYkG,SAVnB,cAACmR,GAAD,CAAS5J,QAAU,kCCnBrC,SAAS8M,KA2BpB,OACI,qCACI,cAAC/I,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAQ,yBACxB,cAACmG,GAAA,EAAD,UACI,eAACpD,EAAA,EAAOqD,MAAR,CAAc2G,OAAO,IAArB,UACI,cAAChK,EAAA,EAAD,CAAQC,QA7BxB,WACI1P,IAAMqC,IAAIqX,uBAA6BtO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,EAAItZ,cA4BvBqM,QAAQ,YAAY2E,OAAK,EAACuI,SAAO,IAClE,cAACnK,EAAA,EAAD,CAAQC,QA1BxB,WACI1P,IAAMqC,IAAIqX,yBAA+BtO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,EAAItZ,cAyBvBqM,QAAQ,cAAc2E,OAAK,EAACuI,SAAO,IACtE,cAACnK,EAAA,EAAD,CAAQC,QAXxB,WACI1P,IAAMwC,KAAKkX,iBAAwB,IAAItO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,OAUZjN,QAAQ,mBAAmB2E,OAAK,EAACuI,SAAO,IAChF,cAACnK,EAAA,EAAD,CAAQC,QAxBxB,WACI1P,IAAMqC,IAAIqX,0BAAgCtO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,EAAItZ,cAuBvBqM,QAAQ,eAAe2E,OAAK,EAACuI,SAAO,IACxE,cAACnK,EAAA,EAAD,CAAQC,QArBxB,WACI1P,IAAMqC,IAAIqX,0BAAgCtO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,EAAItZ,cAoBtBqM,QAAQ,eAAe2E,OAAK,EAACuI,SAAO,IACzE,cAACnK,EAAA,EAAD,CAAQC,QAlBxB,WACI1P,IAAMqC,IAAIqX,2BAAiCtO,OAAM,SAAAuO,GAAG,OAAIzT,QAAQC,IAAIwT,OAiBxBjN,QAAQ,WAAW2E,OAAK,EAACuI,SAAO,YCrCrE,SAASC,KACpB,OACI,eAAChH,GAAA,EAAD,CAAS6C,aAAW,EAApB,UACI,eAACjF,EAAA,EAAD,CAAQL,MAAI,EAAZ,UACI,cAAC4B,GAAA,EAAD,CAAMxC,KAAK,WADf,iEAIA,cAACqD,GAAA,EAAQiH,OAAT,UACI,cAACrK,EAAA,EAAD,CAAQV,GAAIoB,IAAMlB,GAAG,cAAc2K,SAAO,EAA1C,4CCPDpL,oBAAS,WAAuB,IAAD,MACnC7N,EAAe2N,IAAf3N,YACP,OACI,eAACkO,EAAA,EAAD,WACI,cAAC4B,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAQ,iBACxB,cAAC+D,EAAA,EAAD,CAAQ6C,KAAG,EAACvE,GAAG,KAAK4B,MAAM,MAAMjE,QAAO,UAAE/L,EAAYqL,mBAAd,aAAE,EAAyB+N,WACjE,UAAApZ,EAAYqL,mBAAZ,eAAyBgO,UACtB,eAACnH,GAAA,EAAD,WACI,cAACpC,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAQ,cAAciE,MAAM,SAC5C,sBAAMrB,MAAO,CAACkB,UAAW,QAAzB,mBAAmC7P,EAAYqL,mBAA/C,aAAmC,EAAyBgO,mB,UCTjExL,gBAAS,WACpB,IAAO/D,EAAc6D,IAAd7D,WACP,OACI,cAACwP,GAAA,EAAD,CAAOzN,KAAM/B,EAAW8B,MAAMC,KAAM0N,QAASzP,EAAWC,WAAY4F,KAAK,OAAzE,SACI,cAAC2J,GAAA,EAAMhJ,QAAP,UACKxG,EAAW8B,MAAMhK,Y,UCCnBiM,gBAAS,YAA8C,IAAlBvP,EAAiB,EAAjBA,SAEhD,OACI,eAACyS,GAAA,EAAD,CAAM3C,GAAIoB,IAAMlB,GAAE,mBAAchQ,EAASC,IAAzC,UACI,cAAC2Q,EAAA,EAAD,CAAOS,KAAK,UAAUsB,SAAO,EAACC,IAAI,EAAMzC,IAAG,iCAA4BnQ,EAASI,SAArC,UAC3C,eAACqS,GAAA,EAAKT,QAAN,WACI,cAACS,GAAA,EAAKjB,OAAN,CAAauC,UAAU,SAAvB,SAAiC/T,EAASG,QAC1C,cAACsS,GAAA,EAAKyI,KAAN,CAAWnH,UAAU,SAArB,SACI,sBAAMwC,UAAU,OAAhB,SAAwB7M,kBAAO1J,EAASQ,KAAO,mBAEnD,cAACiS,GAAA,EAAKyI,KAAN,CAAWnH,UAAU,SAArB,SACI,sBAAMwC,UAAU,OAAhB,SAAwB7M,kBAAO1J,EAASQ,KAAO,wBCjBpD+O,gBAAS,WACpB,IAAO7B,EAAiB2B,IAAjB3B,cACAvD,EAA8DuD,EAA9DvD,gBAAiBC,EAA6CsD,EAA7CtD,mBAAoBH,EAAyByD,EAAzBzD,sBAE5C,SAASkR,EAAgB9Q,GACrBD,EAAmBC,GAGvB,OACI,eAACoF,EAAA,EAAD,CAAMuB,UAAQ,EAACiD,WAAS,EAAxB,UACI,cAACxE,EAAA,EAAKI,KAAN,CACIU,KAAK,gBACLoB,OAA4B,WAApBxH,EACRyK,SAAgC,WAApBzK,GAAgCF,EAC5CwG,QAAS,kBAAM0K,EAAgB,aAEnC,cAAC1L,EAAA,EAAKI,KAAN,CACIU,KAAK,cACLoB,OAA4B,SAApBxH,EACRyK,SAAgC,SAApBzK,GAA8BF,EAC1CwG,QAAS,kBAAM0K,EAAgB,WAEnC,cAAC1L,EAAA,EAAKI,KAAN,CACIU,KAAK,UACLoB,OAA4B,YAApBxH,EACRyK,SAAgC,YAApBzK,GAAiCF,EAC7CwG,QAAS,kBAAM0K,EAAgB,oBCxBhC5L,gBAAS,WACpB,IAAO7B,EAAiB2B,IAAjB3B,cACAlE,EAA2CkE,EAA3ClE,iBAAkBS,EAAyByD,EAAzBzD,sBAEzB,OACI,cAACmR,GAAA,EAAIC,KAAL,UACI,eAACpG,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,cAACE,EAAA,EAAD,CAAQkB,QAAQ,OAAOvB,KAAK,cAAc1D,QAAQ,iBAEtD,cAACwH,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,cAAC,GAAD,MAEJ,cAAC2D,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACKrH,EACG,cAACqN,GAAA,EAAD,CAAQ3F,QAAM,EAACjC,UAAQ,EAACW,MAAO,CAACkB,UAAW,IAA3C,SACI,cAACgG,GAAA,EAAD,CAAQlG,KAAK,SAAS3B,UAAQ,EAACjC,QAAQ,4BAG3C,cAACgF,GAAA,EAAKoB,MAAN,CAAYyH,YAAa,EAAzB,SACK9R,EAAiBkF,KAAI,SAAA1O,GAAQ,OAC1B,cAAC,GAAD,CAAqCA,SAAYA,GAAzBA,EAASC,mBCtBlDsP,gBAAS,WAEpB,IAAO7B,EAAiB2B,IAAjB3B,cACA1D,EAAgD0D,EAAhD1D,eAAgBJ,EAAgC8D,EAAhC9D,QAAS9E,EAAuB4I,EAAvB5I,SAAUoF,EAAawD,EAAbxD,UAE1C,OACI,cAACkR,GAAA,EAAIC,KAAL,CAAUhJ,QAASrI,EAAnB,SACI,eAACiL,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,cAACE,EAAA,EAAD,CACIkB,QAAQ,OACRvB,KAAK,OACL1D,QAAuB,IAAdvD,EAAA,kCAAsCpF,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAUc,aAAhD,wBAA0Ed,QAA1E,IAA0EA,OAA1E,EAA0EA,EAAUc,YAApF,qBAEjB,cAACqP,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,cAACmB,GAAA,EAAKoB,MAAN,CAAYyH,YAAa,EAAzB,SACK1R,EAAQ8E,KAAI,SAAAzD,GAAM,OACf,cAAC,GAAD,CAAoCnG,SAAUmG,GAA3BA,EAAOpF,yB,iBCdvC,SAAS0V,GAAT,GAA+D,IAAlCC,EAAiC,EAAjCA,aAAcC,EAAmB,EAAnBA,WACtD,OACI,cAAC,KAAD,CACItL,IAAKqL,EACLnL,MAAO,CAACuJ,OAAQ,IAAKtI,MAAO,QAC5BoK,mBAAoB,EACpBC,YAAa,EACbC,QAAQ,eACRC,QAAQ,EACRC,SAAU,EACVC,aAAc,EACdC,YAAY,EACZC,cAAe,SAAAC,GAAO,OAAIT,EAAWS,M,cCblC,SAASC,GAAT,GAAkD,IAAnBC,EAAkB,EAAlBA,SAEpCC,EAAW,CACbxD,OAAQ,kBACR5F,YAAa,OACbqJ,aAAc,MACdC,WAAY,OACZxI,UAAW,SACX6F,OAAQ,KAON4C,EAASC,uBAAY,SAAAC,GACvBN,EAASM,EAAchO,KAAI,SAACzJ,GAAD,OAAerF,OAAOC,OAAOoF,EAAM,CAC1D2W,QAASe,IAAIC,gBAAgB3X,WAElC,CAACmX,IACJ,EAAoDS,aAAY,CAACL,WAA1DM,EAAP,EAAOA,aAAcC,EAArB,EAAqBA,cAAeC,EAApC,EAAoCA,aAEpC,OACI,gDAASF,KAAT,IAAyBzM,MAAO2M,EAAY,2BAAOX,GAZtC,CACbpJ,YAAa,UAW+DoJ,EAA5E,UACI,qCAAWU,MACX,cAAChK,GAAA,EAAD,CAAMxC,KAAK,SAASc,KAAK,SACzB,cAACG,EAAA,EAAD,CAAQ/D,QAAQ,2BCvBb,SAASwP,GAAT,GAA0D,IAA9BjY,EAA6B,EAA7BA,YAAaqN,EAAgB,EAAhBA,QACpD,EAA0BwC,mBAAc,IAAxC,mBAAOqI,EAAP,KAAcd,EAAd,KACA,EAA8BvH,qBAA9B,mBAAOqH,EAAP,KAAgBT,EAAhB,KAcA,OANAzG,qBAAU,WACN,OAAO,WACHkI,EAAMxW,SAAQ,SAACzB,GAAD,OAAe0X,IAAIQ,gBAAgBlY,EAAK2W,eAE3D,CAACsB,IAGA,eAACjI,EAAA,EAAD,WACI,eAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAAGyC,UAAU,SAAjC,UACI,cAACvC,EAAA,EAAD,CAAQ6C,KAAG,EAAC3C,MAAM,OAAOjE,QAAQ,uBACjC,cAAC0O,GAAD,CAAqBC,SAAUA,OAEnC,cAACnH,EAAA,EAAKC,OAAN,CAAa5D,MAAO,IACpB,eAAC2D,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAAGyC,UAAU,SAAjC,UACI,cAACvC,EAAA,EAAD,CAAQ6C,KAAG,EAAC3C,MAAM,OAAOjE,QAAQ,0BAChCyP,GAASA,EAAM/C,OAAS,GACrB,cAACoB,GAAD,CAAoBE,WAAYA,EAAYD,aAAc0B,EAAM,GAAGtB,aAG3E,cAAC3G,EAAA,EAAKC,OAAN,CAAa5D,MAAO,IACpB,eAAC2D,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAAGyC,UAAU,SAAjC,UACI,cAACvC,EAAA,EAAD,CAAQ6C,KAAG,EAAC3C,MAAM,OAAOjE,QAAQ,8BAChCyP,GAASA,EAAM/C,OAAS,GACrB,mCACI,qBAAK5D,UAAU,cAAclG,MAAO,CAACmE,UAAW,IAAK4I,SAAU,iBAI3E,cAACnI,EAAA,EAAKC,OAAN,CAAa5D,MAAO,IACpB,cAAC2D,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,SACK4L,GAASA,EAAM/C,OAAS,GACrB,eAAC3J,EAAA,EAAOqD,MAAR,CAAc2G,OAAQ,EAAtB,UACI,cAAChK,EAAA,EAAD,CAAQ6B,QAASA,EAAS5B,QAtC9C,WACOyL,GACCA,EAAQmB,mBAAmBC,QAAO,SAAAC,GAAI,OAAIvY,EAAYuY,OAoCC7M,UAAQ,EAACS,KAAK,UACzD,cAACX,EAAA,EAAD,CAAQC,QAAS,kBAAM2L,EAAS,KAAKjL,KAAK,eAItD,cAAC8D,EAAA,EAAKC,OAAN,CAAa5D,MAAO,OC/CjB/B,oBAAS,YAA2C,IAAD,EAAjBzK,EAAiB,EAAjBA,SAC7C,EAAkHuK,IAA3G3B,cAAgB8P,EAAvB,EAAuBA,cAAexY,EAAtC,EAAsCA,YAAa6E,EAAnD,EAAmDA,SAAUC,EAA7D,EAA6DA,UAAWzE,EAAxE,EAAwEA,aAAc0E,EAAtF,EAAsFA,WAAYzE,EAAlG,EAAkGA,YAClG,EAAsCuP,oBAAS,GAA/C,mBAAO4I,EAAP,KAAoBC,EAApB,KACA,EAA8C7I,mBAAS,IAAvD,mBAAO8I,EAAP,KAAwBC,EAAxB,KAgBA,OACI,cAACxC,GAAA,EAAIC,KAAL,UACI,eAACpG,EAAA,EAAD,WACI,eAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,UACI,cAACE,EAAA,EAAD,CAAQkB,QAAQ,OAAOvB,KAAK,QAAQ1D,QAAQ,WAC3C+P,GACG,cAAChN,EAAA,EAAD,CACIkC,QAAQ,QACRN,OAAK,EACL3E,QAAWgQ,EAAc,SAAW,YACpChN,QAAW,kBAAMiN,GAAgBD,SAI7C,cAACxI,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACKmM,EACG,cAACR,GAAD,CAAmBjY,YA9BvC,SAA2BC,GACvBD,EAAYC,GAAM5B,MAAK,kBAAMqa,GAAe,OA6ByBrL,QAAWxI,IAEhE,cAAC4I,GAAA,EAAKoB,MAAN,CAAYyH,YAAa,EAAzB,mBACKxW,EAAU2F,cADf,aACK,EAAkBiE,KAAI,SAAAlE,GAAK,OACxB,eAACiI,GAAA,EAAD,WACI,cAAC7B,EAAA,EAAD,CAAOT,IAAK3F,EAAMrH,MACjBqa,GACG,eAAChN,EAAA,EAAOqD,MAAR,CAAc3B,OAAK,EAACsI,OAAQ,EAA5B,UACI,cAAChK,EAAA,EAAD,CACI4B,OAAK,EACLV,MAAOlH,EAAME,OAAS,OAAS,QAC/ByG,KAAM3G,EAAME,OAAS,MAAQ,QAC7BkK,SAAUpK,EAAME,OAChB+F,QAAW,kBAvCvD,SAA4BjG,GACxBoT,EAAmBpT,EAAMvK,IACzBoF,EAAamF,GAqC4CqT,CAAmBrT,IACpC6H,QAASvI,GAAaU,EAAMvK,KAAO0d,IAEvC,cAACnN,EAAA,EAAD,CACI4B,OAAK,EACLV,MAAM,MACNP,KAAK,QACLV,QAAS,kBAzCrD,SAA2BjG,GACvBoT,EAAmBpT,EAAMvK,IACzBqF,EAAYkF,EAAMvK,IAuCqC6d,CAAkBtT,IACjCoK,SAAUpK,EAAME,OAChB2H,QAAStI,GAAcS,EAAMvK,KAAO0d,SAlBzCnT,EAAMvK,mBCrClCsP,gBAAS,YAA4C,IAAlBzK,EAAiB,EAAjBA,SACvC4I,EAAiB2B,IAAjB3B,cACDqQ,EAAQ,CACV,CAACC,SAAU,QAASrH,OAAQ,kBAAM,cAACyE,GAAA,EAAIC,KAAL,sBAClC,CAAC2C,SAAU,SAAUrH,OAAQ,kBAAM,cAAC,GAAD,CAAgB7R,SAAUA,MAC7D,CAACkZ,SAAU,SAAUrH,OAAQ,kBAAM,cAAC,GAAD,MACnC,CAACqH,SAAU,YAAarH,OAAQ,kBAAM,cAAC,GAAD,MACtC,CAACqH,SAAU,YAAarH,OAAQ,kBAAM,cAAC,GAAD,OAE1C,OACI,cAACyE,GAAA,EAAD,CACI6C,KAAM,CAAC/L,OAAO,EAAMd,UAAU,GAC9B8M,aAAe,QACfH,MAAOA,EACPI,YAAa,SAAC7L,EAAG5R,GAAJ,OAAagN,EAAcpD,aAAa5J,EAAK0d,mB,UCjBvD7O,gBAAS,YAA0C,IAAlBzK,EAAiB,EAAjBA,SAE5C,OACI,cAAC8O,GAAA,EAAD,UACI,eAACqB,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAO,GAApB,SACI,cAACzB,GAAA,EAAKgE,MAAN,UACI,eAAChE,GAAA,EAAD,WACI,cAACA,GAAA,EAAKe,MAAN,CAAYC,QAAM,EAACQ,KAAK,QAAQlB,KAAa,OAARrL,QAAQ,IAARA,OAAA,EAAAA,EAAUgB,YAAa,qBAC5D,cAAC+J,GAAA,EAAKmC,QAAN,CAAciI,cAAc,SAA5B,SACI,cAACzI,EAAA,EAAD,CAAQ1B,GAAG,KAAKrC,QAAO,OAAE3I,QAAF,IAAEA,OAAF,EAAEA,EAAUc,uBAKnD,eAACqP,EAAA,EAAKC,OAAN,CAAa5D,MAAO,EAApB,UACI,eAAC+M,GAAA,EAAUxK,MAAX,CAAiB2G,OAAQ,EAAzB,UACI,cAAC6D,GAAA,EAAD,CAAWrI,MAAM,YAAYxP,MAAK,OAAE1B,QAAF,IAAEA,OAAF,EAAEA,EAAU2D,iBAC9C,cAAC4V,GAAA,EAAD,CAAWrI,MAAM,YAAYxP,MAAK,OAAE1B,QAAF,IAAEA,OAAF,EAAEA,EAAUkG,qBAElD,cAACoM,GAAA,EAAD,IACCtS,GACG,cAAC,GAAD,CAAcA,SAAUA,eCvBjCyK,gBAAS,WACpB,IAAOxK,EAAYqT,eAAZrT,SAEA2I,EAAiB2B,IAAjB3B,cACAvH,EAAoCuH,EAApCvH,UAAWoE,EAAyBmD,EAAzBnD,YAAazF,EAAY4I,EAAZ5I,SAM/B,OAJAkQ,qBAAU,WACNtH,EAAcnD,YAAYxF,KAC3B,CAAC2I,EAAenD,EAAaxF,IAE7BoB,EAAkB,cAACkR,GAAD,CAAS5J,QAAU,wBAGpC,cAACwH,EAAA,EAAD,UACI,eAACA,EAAA,EAAKC,OAAN,CAAa5D,MAAM,KAAnB,UACI,cAACgN,GAAD,CAAgBxZ,SAAUA,IAC1B,cAAC,GAAD,CAAiBA,SAAUA,Y,2BClB5B,SAASyZ,GAAT,GAA8D,IAA5BC,EAA2B,EAAtCC,UAAyBC,EAAa,mBAEjElP,EADaH,IAAbxM,UACA2M,WACP,OACI,cAAC,KAAD,2BACQkP,GADR,IAEI/H,OAAU,SAACjB,GAAD,OAAWlG,EAAa,cAACgP,EAAD,eAAe9I,IAAY,cAAC,KAAD,CAAU1F,GAAG,UCXvE,SAAS2O,KACpB,OAAO,IAAI7V,gBAAgB8V,eAAcC,QCG9B,SAASC,KACpB,IAAMla,EAAQ+Z,KAAWvb,IAAI,SAQ7B,OACI,eAACwQ,GAAA,EAAD,CAAS6C,aAAW,EAAC1C,UAAU,SAA/B,UACI,eAACvC,EAAA,EAAD,CAAQE,MAAM,QAAd,UACI,cAACqB,GAAA,EAAD,CAAMxC,KAAK,UADf,+BAIA,2GACC3L,GACG,qCACI,4FACA,cAAC4L,EAAA,EAAD,CAAQmK,SAAO,EAAClK,QAhBhC,WACI/M,EAAMS,MAAMU,mBAAmBD,GAAOvB,MAAK,WACvClB,IAAM4c,QAAQ,2DAcsCtR,QAAQ,eAAe4D,KAAK,eCjB7E,SAAS2N,KACpB,IAAOxT,EAAc6D,IAAd7D,WACD5G,EAAQ+Z,KAAWvb,IAAI,SACvBzB,EAAQgd,KAAWvb,IAAI,SAE7B,SAAS6b,IACLvb,EAAMS,MAAMU,mBAAmBD,GAAOvB,MAAK,WACvClB,IAAM4c,QAAQ,0DAItB,IAAMG,EACS,YADTA,EAEM,SAFNA,EAGO,UAEb,EAA4BrK,mBAASqK,GAArC,mBAAOhd,EAAP,KAAeid,EAAf,KAiCA,OA/BAnK,qBAAU,WACNtR,EAAMS,MAAMQ,aAAahD,EAAOiD,GAAOvB,MAAK,WACxC8b,EAAUD,MACX/S,OAAM,WACLgT,EAAUD,QAEf,CAACA,EAAeA,EAAgBvd,EAAOiD,IA0BtC,eAACgP,GAAA,EAAD,CAAS6C,aAAW,EAAC1C,UAAU,SAA/B,UACI,eAACvC,EAAA,EAAD,CAAQL,MAAI,EAACO,MAAM,QAAnB,UACI,cAACqB,GAAA,EAAD,CAAMxC,KAAK,aADf,wBAIA,cAACqD,GAAA,EAAQiH,OAAT,UA7BR,WACI,OAAQ3Y,GACJ,KAAKgd,EACD,OAAO,6CACX,KAAKA,EACD,OACI,gCACI,0GACA,cAAC1O,EAAA,EAAD,CAAQmK,SAAO,EAAClK,QAASwO,EAAmB5N,KAAK,OAAO5D,QAAQ,oBAG5E,KAAKyR,EACD,OACI,gCACI,4EACA,cAAC1O,EAAA,EAAD,CAAQmK,SAAO,EAAClK,QAAS,kBAAMjF,EAAWgC,UAAU,cAAC,GAAD,MAAgB6D,KAAK,SAAzE,uCAeP+N,QC3CF7P,oBAAS,WAEtB,IAAM8P,EAAWT,eACjB,EAAiCvP,IAA1B3N,EAAP,EAAOA,YAAamB,EAApB,EAAoBA,UAWpB,OATAmS,qBAAU,WACLtT,EAAYC,MACbkB,EAAU6I,iBAAiBU,SAAQ,kBAAM1K,EAAYyL,kBAGrDtK,EAAU+I,yBAAyBvI,MAAK,kBAAM3B,EAAYyL,oBAE3D,CAACzL,EAAamB,IAEbnB,EAAYwL,UAGd,qCACE,cAAC,IAAD,CAAgByD,SAAS,cACzB,cAAC,GAAD,IACA,cAAC,KAAD,CAAOV,OAAK,EAACqP,KAAK,IAAIb,UAAWc,KACjC,cAAC,KAAD,CACED,KAAK,QACL3I,OAAU,kBACR,qCACE,cAAC,EAAD,IACA,cAAC/G,EAAA,EAAD,CAAWS,MAAO,CAACkB,UAAW,OAA9B,SACE,eAAC,KAAD,WACE,cAACgN,GAAD,CAAce,KAAK,cAAcb,UAAWe,KAC5C,cAACjB,GAAD,CAAiCe,KAAM,CAAC,YAAa,iBAAkBb,UAAWgB,IAA/DJ,EAAS3c,KAC5B,cAAC6b,GAAD,CAAce,KAAK,eAAeb,UAAWiB,KAC7C,cAACnB,GAAD,CAAce,KAAK,sBAAsBb,UAAWkB,KACpD,cAAC,KAAD,CAAOL,KAAK,2BAA2Bb,UAAWK,KAClD,cAAC,KAAD,CAAOQ,KAAK,wBAAwBb,UAAWO,KAC/C,cAACT,GAAD,CAAce,KAAK,UAAUb,UAAWlE,KACxC,cAAC,KAAD,CAAO+E,KAAK,gBAAgBb,UAAWmB,KACvC,cAAC,KAAD,CAAOnB,UAAW7D,mBAtBE,cAACvD,GAAD,CAAS5J,QAAU,sBCrBxCoS,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqB1c,MAAK,YAAkD,IAA/C2c,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,SCNC,SAASO,KACtB,IAAQC,EAAa1B,eAAb0B,SAMR,OAJAtL,qBAAU,WACRnJ,OAAO0U,SAAS,EAAG,KAClB,CAACD,IAEG,KCIF,IAAM/d,GAAUie,eAEvBC,IAAS9J,OACP,cAACxH,EAAauR,SAAd,CAAuBla,MAAO/E,EAA9B,SACE,eAAC,KAAD,CAAQc,QAASA,GAAjB,UACE,cAAC8d,GAAD,IACA,cAAC,GAAD,SAIJM,SAASC,eAAe,SAM1Bf,O","file":"static/js/main.58e4c0c8.chunk.js","sourcesContent":["import { Profiles } from \"./profiles\";\r\n\r\nexport interface Activity {\r\n    id: string;\r\n    title: string;\r\n    date: Date | null;\r\n    description: string;\r\n    category: string;\r\n    city: string;\r\n    venue: string;\r\n    hostUserName: string;\r\n    host?: Profiles;\r\n    isCancelled: boolean;\r\n    isGoing: boolean;\r\n    isHost: boolean;\r\n    attendees: Profiles[]\r\n}\r\n\r\nexport interface UserActivity{\r\n    id: string;\r\n    title: string;\r\n    date: Date | null;\r\n    category: string;\r\n}\r\n\r\nexport class Activity implements Activity{\r\n    constructor(init: ActivityFormValues){\r\n        Object.assign(this, init);\r\n    }\r\n}\r\n\r\nexport class ActivityFormValues{\r\n    id?: string = undefined;\r\n    title: string = '';\r\n    category: string = '';\r\n    description: string = '';\r\n    city: string = '';\r\n    venue: string = ''; \r\n    date: Date | null = null;\r\n\r\n    constructor(activity?: Activity) {\r\n        if (activity) {\r\n            this.id = activity.id;\r\n            this.title = activity.title;\r\n            this.category = activity.category;\r\n            this.description = activity.description;\r\n            this.date = activity.date;\r\n            this.venue = activity.venue;\r\n            this.city = activity.city;\r\n          }\r\n    }\r\n}","export interface Pagination{\r\n    currentPage: number;\r\n    itemsPerPage: number;\r\n    totalItems: number;\r\n    totalPages: number;\r\n}\r\n\r\nexport class PaginatedResult<T>{\r\n    data: T;\r\n    pagination: Pagination;\r\n\r\n    constructor(data: T, pagination: Pagination){\r\n        this.data = data;\r\n        this.pagination = pagination;\r\n    }\r\n}\r\n\r\nexport class PagingParams{\r\n    pageNumber: number;\r\n    pageSize: number;\r\n\r\n    constructor(pageNumber: number = 1, pageSize: number = 4){\r\n        this.pageNumber = pageNumber;\r\n        this.pageSize = pageSize;\r\n    }\r\n}","import axios, {AxiosResponse, AxiosError} from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport { Activity, ActivityFormValues, UserActivity } from '../models/activity';\r\nimport { PaginatedResult } from '../models/pagination';\r\nimport { Photo, Profiles } from '../models/profiles';\r\nimport { User, UserForm } from '../models/user';\r\nimport { stores } from '../stores/stores';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\nconst responseBody = <T> (response: AxiosResponse<T>) => response.data;\r\n\r\nconst sleep = (delay: number) => {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, delay);\r\n    })\r\n}\r\n\r\naxios.interceptors.request.use(config => {\r\n    if(stores.commonStore.token){\r\n        config.headers!.Authorization = `Bearer ${stores.commonStore.token}`; \r\n    }\r\n    return config;\r\n})\r\n\r\naxios.interceptors.response.use(async response => {\r\n    if(process.env.NODE_ENV === 'development') await sleep(2000);\r\n    \r\n    var pagination = response.headers[\"pagination\"];\r\n    if(pagination){\r\n        response.data = new PaginatedResult(response.data, JSON.parse(pagination));\r\n        return response as AxiosResponse<PaginatedResult<any>>;\r\n    }\r\n    return response;\r\n}, (error: AxiosError) => {\r\n    const {data, status, config, headers} = error.response!;\r\n    switch (status) {\r\n        case 400:\r\n            if(typeof data === 'string') {\r\n                toast.error(data);\r\n            }\r\n            if(config.method === 'get' && data.errors.hasOwnProperty('id')){\r\n                history.push('not-found');\r\n            }\r\n            if(data.errors){\r\n                var modelStateErrors = [];\r\n                for(const key in data.errors){\r\n                    if(data.errors[key]){\r\n                        modelStateErrors.push(data.errors[key]);\r\n                    }\r\n                }\r\n                throw modelStateErrors.flat();\r\n            }\r\n            break;\r\n        case 401:\r\n            if(headers['www-authenticate']?.startsWith('Bearer error=\"invalid_token\"')){\r\n                stores.userStore.logout();\r\n                toast.error(\"Session expired - please login again\");\r\n            }\r\n            break;\r\n        case 404:\r\n            history.push('/not-found');\r\n            break;\r\n        case 500:\r\n            stores.commonStore.setServerError(data);\r\n            history.push('/server-error');\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return Promise.reject(error);\r\n})\r\n\r\nconst actions = {\r\n    get: <T> (url: string) => axios.get<T>(url).then(responseBody),\r\n    post: <T> (url: string, body: {}) => axios.post<T>(url, body).then(responseBody),\r\n    put: <T> (url: string, body: {}) => axios.put<T>(url, body).then(responseBody),\r\n    delete: <T> (url: string) => axios.delete<T>(url).then(responseBody)\r\n}\r\n\r\nconst activities = {\r\n    activityList: (params: URLSearchParams) => axios.get<PaginatedResult<Activity[]>>('/activities', {params}).then(responseBody),\r\n    activityDetails: (id: string) => actions.get<Activity>(`/activities/${id}`),\r\n    createActivity: (activity: ActivityFormValues) => actions.post<void>('/activities', activity),\r\n    updateActivity: (activity: ActivityFormValues) => actions.put<void>(`/activities/${activity.id}`, activity),\r\n    deleteActivity: (id: string) => actions.delete<void>(`/activities/${id}`),\r\n    updateAttend: (id: string) => actions.post<void>(`/activities/${id}/attend`, {})\r\n}\r\n\r\nconst users = {\r\n    current: () => actions.get<User>('/account'),\r\n    login: (user: UserForm) => actions.post<User>('account/login', user),\r\n    register: (user: UserForm) => actions.post<User>('account/register', user),\r\n    fbLogin: (accessToken: string) => actions.post<User>(`account/fbLogin?accessToken=${accessToken}`, {}),\r\n    refreshToken: () => actions.post<User>(\"account/refreshToken\", {}),\r\n    confirmEmail: (token: string, email: string) => actions.post<void>(`account/confirmEmail?token=${token}&userEmail=${email}`, {}),\r\n    resendConfirmEmail: (email: string) => actions.get<void>(`account/emailConfirmationLink?userEmail=${email}`)\r\n}\r\n\r\nconst profiles = {\r\n    get: (username: string) => actions.get<Profiles>(`/profiles/${username}`),\r\n    uploadPhoto: (file: Blob) => {\r\n        let formData = new FormData();\r\n        formData.append('File', file);\r\n        return axios.post<Photo>('photos', formData, {\r\n            headers: {'Content-type': 'multipart/form-data'}\r\n        });\r\n    },\r\n    setMainPhoto: (id: string) => actions.put(`/photos/main/${id}`, {}),\r\n    deletePhoto: (id: string) => actions.delete(`/photos/${id}`),\r\n    updateFollow: (username: string) => actions.put(`/follow/${username}`, {}),\r\n    loadListFollows: (username: string, predicate: string) => actions.get<Profiles[]>(`/follow/${username}?predicate=${predicate}`),\r\n    loadUserActivities: (username: string, predicate: string) => actions.get<UserActivity[]>(`/profiles/${username}/activities/?predicate=${predicate}`)\r\n}\r\n\r\nconst agent = {\r\n    activities,\r\n    users,\r\n    profiles\r\n}\r\n\r\nexport default agent","import { User } from \"./user\";\r\n\r\nexport interface Profiles{\r\n    displayName:string;\r\n    userName: string;\r\n    mainPhoto?:string;\r\n    bio?: string;\r\n    photos: Photo[];\r\n    isFollowing: boolean;\r\n    followersCount: number;\r\n    followingsCount: number\r\n}\r\n\r\nexport class Profiles implements Profiles {\r\n    constructor(user: User){\r\n        this.displayName = user.displayName;\r\n        this.userName = user.userName;\r\n        this.mainPhoto = user.mainPhoto;\r\n    }\r\n}\r\n\r\nexport interface Photo{\r\n    id: string;\r\n    url: string;\r\n    isMain: boolean;\r\n}","import {makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport { Activity, ActivityFormValues } from \"../models/activity\";\r\nimport agent from '../api/agent';\r\nimport {v4 as uuid} from 'uuid';\r\nimport { format } from \"date-fns\";\r\nimport { stores } from \"./stores\";\r\nimport { Profiles } from \"../models/profiles\";\r\nimport { Pagination, PagingParams } from \"../models/pagination\";\r\n\r\nexport default class ActivityStore{\r\n    activityRegistry = new Map<string, Activity>();\r\n    selectedActivity: Activity | undefined = undefined;\r\n    isLoading: boolean = true;\r\n    isSubmitting: boolean = false; \r\n    pagination: Pagination | null = null;\r\n    pagingParams = new PagingParams();\r\n    predicate = new Map().set('all', true);\r\n\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n\r\n        reaction(\r\n            () => this.predicate.keys(),\r\n            () => {\r\n                this.pagingParams = new PagingParams();\r\n                this.activityRegistry.clear();\r\n                this.loadActivities();\r\n            }\r\n        )\r\n    }\r\n\r\n    setPredicate = (key: string, value: string | Date) => {\r\n        const resetPredicate = () => {\r\n            this.predicate.forEach((value, key) => {\r\n                if (key !== 'startDate') this.predicate.delete(key);\r\n            })\r\n        }\r\n        if(['all', 'isGoing', 'isHost'].includes(key)){\r\n            resetPredicate();\r\n            this.predicate.set(key, true);\r\n        }\r\n        if(key === 'startDate'){\r\n            this.predicate.delete('startDate');\r\n            this.predicate.set('startDate', value);\r\n        }\r\n    }\r\n\r\n    setPagingParams = (pagingParams: PagingParams) => {\r\n        this.pagingParams = pagingParams;\r\n    }\r\n\r\n    get axiosPagingParams(){\r\n        const params = new URLSearchParams();\r\n        params.append('pageNumber', this.pagingParams.pageNumber.toString());\r\n        params.append('pageSize', this.pagingParams.pageSize.toString());\r\n\r\n        this.predicate.forEach((value, key) => {\r\n            if(key === 'startDate'){\r\n                params.append(key, (value as Date).toISOString());\r\n            }\r\n            else{\r\n                params.append(key, value);\r\n            }\r\n        })\r\n\r\n        return params;\r\n    }\r\n\r\n    get activitiesByDate(){\r\n        return Array.from(this.activityRegistry.values())\r\n            .sort((a, b) => a.date!.getTime() - b.date!.getTime());\r\n    }\r\n\r\n    get groupedActivities(){\r\n        return Object.entries(\r\n            this.activitiesByDate.reduce((activities, activity) => {\r\n                const date = format(activity.date!, 'dd MMM yyyy');\r\n                activities[date] = activities[date] ? [...activities[date], activity] : [activity] \r\n                return activities;\r\n            }, {} as {[key: string]: Activity[]})\r\n        )\r\n    }\r\n\r\n    loadActivities = async () => {\r\n        this.isLoading = true;\r\n        try {\r\n            const result = await agent.activities.activityList(this.axiosPagingParams);\r\n            result.data.forEach(activity => {\r\n                this.setActivity(activity);\r\n            })\r\n            this.setPagination(result.pagination);\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() => this.isLoading = false);\r\n        }\r\n    }\r\n\r\n    setPagination = (pagination: Pagination) => {\r\n        this.pagination = pagination;\r\n    }\r\n\r\n    private setActivity = (activity: Activity) => {\r\n        const user = stores.userStore.user;\r\n        if(user){\r\n            activity.isGoing = activity.attendees?.some(attendee => attendee.userName === user.userName);\r\n            activity.isHost = activity.hostUserName === user.userName;\r\n        }\r\n        activity.host = activity.attendees?.find(attendee => attendee.userName === activity.hostUserName);\r\n        activity.date = new Date(activity.date!);\r\n        this.activityRegistry.set(activity.id, activity);\r\n    }\r\n\r\n    loadActivityDetail = async (id: string) => {\r\n        var activity = this.activityRegistry.get(id);\r\n        if(activity) {\r\n            this.selectActivity(activity);\r\n            return activity;\r\n        }\r\n        var data = await agent.activities.activityDetails(id);\r\n        this.setActivity(data);\r\n        this.selectActivity(data);\r\n        return data;\r\n    }\r\n\r\n    selectActivity = (activity: Activity) => {\r\n        this.selectedActivity = activity;\r\n    }\r\n\r\n    cancelSelectActivity = () => {\r\n        this.selectedActivity = undefined;\r\n    }\r\n\r\n    submitActivity = async (activity: ActivityFormValues) => {\r\n        const user = stores.userStore.user;\r\n        var newActivity = new Activity(activity);\r\n        if(activity.id){\r\n            await agent.activities.updateActivity(newActivity);\r\n            let updateActivity = {...this.activityRegistry.get(activity.id), ...activity};\r\n            this.activityRegistry.set(updateActivity.id!, updateActivity as Activity);\r\n            this.selectActivity(updateActivity as Activity);\r\n            return;\r\n        }\r\n        else{\r\n            newActivity.id = uuid();\r\n            await agent.activities.createActivity(newActivity);\r\n            var attendee = new Profiles(user!);\r\n            newActivity.hostUserName = user!.userName;\r\n            newActivity.attendees = [attendee];\r\n            this.setActivity(newActivity);\r\n            this.selectActivity(newActivity);\r\n            return;\r\n        }\r\n    }\r\n\r\n    deleteActivity = (id: string) => {\r\n        runInAction(() =>{\r\n            this.isSubmitting = true;\r\n        })\r\n        agent.activities.deleteActivity(id).then(() => {\r\n            runInAction(() =>{\r\n                this.activityRegistry.delete(id);\r\n                this.isSubmitting = false;\r\n            })\r\n        })\r\n    }\r\n\r\n    updateAttendance = async (id: string) => {\r\n        const user = stores.userStore.user;\r\n        runInAction(() => this.isSubmitting = true);\r\n        try {\r\n            await agent.activities.updateAttend(id);\r\n            if(this.selectedActivity?.isGoing){\r\n                runInAction(() => {\r\n                    this.selectedActivity!.attendees = this.selectedActivity!.attendees?.filter(a => a.userName !== user?.userName);\r\n                    this.selectedActivity!.isGoing = false\r\n                });\r\n            }\r\n            else{\r\n                var attendee = new Profiles(user!);\r\n                runInAction(() => {\r\n                    this.selectedActivity?.attendees?.push(attendee);\r\n                    this.selectedActivity!.isGoing = true\r\n                });\r\n            }\r\n            runInAction(() => this.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!));\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally{\r\n            runInAction(() => this.isSubmitting = false);\r\n        }\r\n    }\r\n\r\n    cancelActivityToggle = async () => {\r\n        this.isSubmitting = true;\r\n        try {\r\n            await agent.activities.updateAttend(this.selectedActivity!.id);\r\n            runInAction(() =>{\r\n                this.selectedActivity!.isCancelled = !this.selectedActivity?.isCancelled;\r\n                this.activityRegistry.set(this.selectedActivity!.id, this.selectedActivity!);\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() => this.isSubmitting = false);\r\n        }\r\n    }\r\n\r\n    updateAttendeeFollow = (username: string) => {\r\n        this.activityRegistry.forEach(activity => {\r\n            activity.attendees.forEach(attendee => {\r\n                if(attendee.userName === username){\r\n                    attendee.isFollowing ? attendee.followersCount-- : attendee.followersCount++;\r\n                    attendee.isFollowing = !attendee.isFollowing;\r\n                }\r\n            })\r\n        })\r\n    }\r\n}","import { makeAutoObservable, reaction, runInAction } from \"mobx\";\r\nimport agent from \"../api/agent\";\r\nimport { UserActivity } from \"../models/activity\";\r\nimport { Photo, Profiles } from \"../models/profiles\";\r\nimport { stores } from \"./stores\";\r\n\r\nexport default class ProfilesStore{\r\n    profiles: Profiles | null = null;\r\n    follows: Profiles[] = []; \r\n    activityRegistry = new Map<string, UserActivity>();\r\n    isLoading: boolean = false;\r\n    isUpload: boolean = false;\r\n    isSetMain: boolean = false;\r\n    isDeleting: boolean = false;\r\n    isFollowing: boolean = false;\r\n    loadingFollows: boolean = false;\r\n    loadingUserActivities: boolean = false;\r\n    activeTab: number = 0;\r\n    activeEventMenu: string = 'future';\r\n\r\n    constructor(){\r\n        makeAutoObservable(this);\r\n        \r\n        reaction(\r\n            () => this.activeTab,\r\n            (activeTab) => {\r\n                if(activeTab === 3 || activeTab === 4){\r\n                    const predicate = activeTab === 3 ? 'followers' : 'followings';\r\n                    this.loadListFollows(predicate);\r\n                }\r\n                if(activeTab === 2){\r\n                    this.activityRegistry.clear();\r\n                    this.loadUserActivities(this.activeEventMenu);\r\n                }\r\n                else{\r\n                    this.activityRegistry.clear();\r\n                    this.follows = [];\r\n                }\r\n            }\r\n        )\r\n\r\n        reaction(\r\n            () => this.activeEventMenu,\r\n            (activeEventMenu) => {\r\n                this.activityRegistry.clear();\r\n                this.loadUserActivities(activeEventMenu);\r\n            }\r\n        )\r\n    }\r\n\r\n    setActiveEventMenu = (activeMenu: string) => {\r\n        this.activeEventMenu = activeMenu;\r\n    }\r\n\r\n    get activitiesByDate(){\r\n        return Array.from(this.activityRegistry.values())\r\n            .sort((a, b) => a.date!.getTime() - b.date!.getTime());\r\n    }\r\n\r\n    loadUserActivities = async (predicate: string) => {\r\n        this.loadingUserActivities = true;\r\n        this.activityRegistry.clear();\r\n        try {\r\n            var result = await agent.profiles.loadUserActivities(this.profiles!.userName, predicate);\r\n            runInAction(() =>{\r\n                result.forEach(activity => {\r\n                    activity.date = new Date(activity.date!);\r\n                    runInAction(() =>{\r\n                        this.activityRegistry.set(activity.id, activity);\r\n                    })\r\n                });\r\n            })\r\n            \r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally{\r\n            runInAction(() =>  this.loadingUserActivities = false);\r\n        }\r\n    }\r\n\r\n    setActiveTab = (activeTab: any) => {\r\n        this.activeTab = activeTab;\r\n    }\r\n\r\n    get isCurrentUser(){\r\n        if(stores.userStore.user && this.profiles){\r\n            return stores.userStore.user.userName === this.profiles.userName;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getProfiles = async (username: string) => {\r\n        this.isLoading = true\r\n        try {\r\n            var profiles = await agent.profiles.get(username);\r\n            runInAction(() =>this.profiles = profiles)\r\n        } catch (error) {\r\n            console.log(error)\r\n        } finally {\r\n            runInAction(() =>this.isLoading = false);\r\n        }\r\n    }\r\n\r\n    uploadPhoto = async (file: Blob) => {\r\n        this.isUpload = true;\r\n        try {\r\n            var response = await agent.profiles.uploadPhoto(file);\r\n            var photo = response.data;\r\n            runInAction(() =>{\r\n                if(this.profiles){\r\n                    this.profiles.photos.push(photo);\r\n                    if(photo.isMain && stores.userStore.user){\r\n                        stores.userStore.setPhoto(photo.url);\r\n                        this.profiles.mainPhoto = photo.url;\r\n                    }\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() =>this.isUpload = false)\r\n        }\r\n    }\r\n\r\n    setMainPhoto = async (photo: Photo) => {\r\n        this.isSetMain = true;\r\n        try {\r\n            await agent.profiles.setMainPhoto(photo.id);\r\n            stores.userStore.setPhoto(photo.url)\r\n            runInAction(() =>{\r\n                if(this.profiles){\r\n                    this.profiles.photos.find(p => p.isMain)!.isMain = false;\r\n                    this.profiles.photos.find(p => p.id === photo.id)!.isMain = true;\r\n                    this.profiles.mainPhoto = photo.url;\r\n                }\r\n            })\r\n            \r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() =>this.isSetMain = false)\r\n        }\r\n    }\r\n\r\n    deletePhoto = async (id: string) => {\r\n        this.isDeleting = true;\r\n        try {\r\n            await agent.profiles.deletePhoto(id);\r\n            runInAction(() => {\r\n                if(this.profiles){\r\n                    this.profiles!.photos = this.profiles!.photos.filter(p => p.id !== id);\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() =>this.isDeleting = false)\r\n        }\r\n    }\r\n\r\n    updateFollowing = async (userName: string, following: boolean) => {\r\n        this.isFollowing = true\r\n        try {\r\n            await agent.profiles.updateFollow(userName);\r\n            stores.activityStore.updateAttendeeFollow(userName);\r\n            runInAction(() => {\r\n                if(this.profiles && this.profiles.userName !== stores.userStore.user?.userName && this.profiles.userName === userName){\r\n                    following ? this.profiles.followersCount++ : this.profiles.followersCount--;\r\n                    this.profiles.isFollowing = !this.profiles.isFollowing;\r\n                }\r\n                if(this.profiles && this.profiles.userName === stores.userStore.user?.userName){\r\n                    following ? this.profiles.followingsCount++ : this.profiles.followingsCount--;\r\n                }\r\n                this.follows.forEach(follow => {\r\n                    if(follow.userName === userName) {\r\n                        follow.isFollowing ? follow.followersCount-- : follow.followersCount++;\r\n                        follow.isFollowing = !follow.isFollowing;\r\n                    }\r\n                })\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            runInAction(() => this.isFollowing = false)\r\n        }\r\n    }\r\n\r\n    loadListFollows = async (predicate: string) => {\r\n        this.loadingFollows = true;\r\n        try {\r\n            var follows = await agent.profiles.loadListFollows(this.profiles!.userName, predicate);\r\n            runInAction(() => this.follows = follows)\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally{\r\n            runInAction(() => this.loadingFollows = false)\r\n        }\r\n    }\r\n}","import { makeAutoObservable, runInAction } from \"mobx\";\r\nimport { history } from \"../..\";\r\nimport agent from \"../api/agent\";\r\nimport { User, UserForm } from \"../models/user\";\r\nimport { stores } from \"./stores\";\r\n\r\nexport default class UserStore{\r\n    user: User | null = null;\r\n    fbAccessToken: string | null = null;\r\n    fbLoading: boolean = false;\r\n    refreshTokenTimeout: any;\r\n\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    get isLoggedIn(){\r\n        return !!this.user;\r\n    }\r\n\r\n    login = async (user: UserForm) => {\r\n        try {\r\n            const result = await agent.users.login(user);\r\n            stores.commonStore.setToken(result.token);\r\n            this.startRefreshTokenTimer(result);\r\n            runInAction(() => this.user = result);\r\n            history.push('/activities');\r\n            stores.modalStore.closeModal();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    register = async (user: UserForm) => {\r\n        try {\r\n            await agent.users.register(user);\r\n            history.push(`/account/registerSuccess?email=${user.email}`);\r\n            stores.modalStore.closeModal();\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    logout = () => {\r\n        stores.commonStore.setToken(null);\r\n        runInAction(() => {\r\n            this.user = null;\r\n            this.fbAccessToken = null;\r\n        });\r\n        history.push('/');\r\n    }\r\n\r\n    getCurrentUser = async () => {\r\n        try {\r\n            const user = await agent.users.current();\r\n            runInAction(() => this.user = user)\r\n            stores.commonStore.setToken(user.token);\r\n            this.startRefreshTokenTimer(user);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    setPhoto = (photoUrl: string) => {\r\n        this.user!.mainPhoto = photoUrl;\r\n    }\r\n\r\n    getFacebookLoginStatus = async () => {\r\n        window.FB.getLoginStatus(response => {\r\n            if(response.status === 'connected'){\r\n                this.fbAccessToken = response.authResponse.accessToken;\r\n            }\r\n        })\r\n    }\r\n\r\n    facebookLogin = () => {\r\n        this.fbLoading = true;\r\n        const apiLogin = (accessToken: string) => {\r\n            agent.users.fbLogin(accessToken).then(user => {\r\n                stores.commonStore.setToken(user.token);\r\n                this.startRefreshTokenTimer(user);\r\n                runInAction(() => {\r\n                    this.user = user;\r\n                });\r\n                history.push('/activities');\r\n            }).catch(error => \r\n                console.log(error)\r\n            ).finally(() => {\r\n                runInAction(() => this.fbLoading = false)\r\n            })\r\n        }\r\n\r\n        if(this.fbAccessToken){\r\n            apiLogin(this.fbAccessToken)\r\n        }\r\n        else{\r\n            window.FB.login(response => \r\n                apiLogin(response.authResponse.accessToken),\r\n            {scope: 'public_profile,email'})\r\n        }\r\n    }\r\n\r\n    refreshToken = async () => {\r\n        this.stopRefreshTokenTimer();\r\n        try {\r\n            var user = await agent.users.refreshToken();\r\n            runInAction(() => this.user = user);\r\n            stores.commonStore.setToken(user.token);\r\n            this.startRefreshTokenTimer(user);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    private startRefreshTokenTimer(user: User){\r\n        const jwtToken = JSON.parse(atob(user.token.split('.')[1]));\r\n        const expires = new Date(jwtToken.exp*1000);\r\n        const timeout = expires.getTime() - Date.now() - (30*1000);\r\n        this.refreshTokenTimeout = setTimeout(this.refreshToken, timeout);\r\n    }\r\n\r\n    private stopRefreshTokenTimer(){\r\n        clearTimeout(this.refreshTokenTimeout); \r\n    }\r\n}","import { createContext, useContext } from \"react\"\r\nimport ActivityStore from \"./activityStore\"\r\nimport CommentStore from \"./commentStore\"\r\nimport CommonStore from \"./commonStore\"\r\nimport ModalStore from \"./modalStore\"\r\nimport ProfilesStore from \"./profilesStore\"\r\nimport UserStore from \"./userStore\"\r\n\r\ninterface Stores{\r\n    activityStore: ActivityStore,\r\n    commonStore: CommonStore,\r\n    userStore: UserStore,\r\n    modalStore: ModalStore,\r\n    profilesStore: ProfilesStore,\r\n    commentStore: CommentStore\r\n}\r\n\r\nexport const stores : Stores = {\r\n    activityStore: new ActivityStore(),\r\n    commonStore: new CommonStore(),\r\n    userStore: new UserStore(),\r\n    modalStore: new ModalStore(),\r\n    profilesStore: new ProfilesStore(),\r\n    commentStore: new CommentStore()\r\n}\r\n\r\nexport const StoreContext = createContext(stores)\r\n\r\nexport default function useStores(){\r\n    return useContext(StoreContext)\r\n}","import {makeAutoObservable, reaction } from \"mobx\";\r\nimport { ServerError } from \"../models/serverError\";\r\n\r\nexport default class CommonStore{\r\n    serverError: ServerError | null = null;\r\n    token: string | null = window.localStorage.getItem('jwt');\r\n    appLoaded = false;\r\n\r\n    constructor(){\r\n        makeAutoObservable(this);\r\n\r\n        reaction(\r\n            () => this.token,\r\n            (token) => {\r\n                if(token){\r\n                    window.localStorage.setItem('jwt', token);\r\n                }\r\n                else{\r\n                    window.localStorage.removeItem('jwt');\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setServerError = (error: ServerError) => {\r\n        this.serverError = error;\r\n    }\r\n\r\n    setToken = (token: string | null) => {\r\n        this.token = token;\r\n    }\r\n\r\n    setAppLoaded = () => {\r\n        this.appLoaded = true;\r\n    }\r\n}","import { makeAutoObservable } from \"mobx\";\r\n\r\ninterface Modal{\r\n    open: boolean;\r\n    body: JSX.Element | null\r\n}\r\n\r\nexport default class ModalStore{\r\n    modal: Modal = {\r\n        open: false,\r\n        body: null\r\n    }\r\n\r\n    constructor(){\r\n        makeAutoObservable(this);\r\n    }\r\n    \r\n    openModal = (content: JSX.Element) => {\r\n        this.modal.open = true;\r\n        this.modal.body = content;\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.modal.open = false;\r\n        this.modal.body = null;\r\n    }\r\n}","import { HubConnection, HubConnectionBuilder, LogLevel } from \"@microsoft/signalr\";\r\nimport { makeAutoObservable, runInAction } from \"mobx\";\r\nimport UserComment from \"../models/comment\";\r\nimport { stores } from \"./stores\";\r\n\r\nexport default class CommentStore{\r\n    comments: UserComment[] = [];\r\n    hubConnection: HubConnection | null = null;\r\n\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n    }\r\n\r\n    createHubConnection = (activityId: string) => {\r\n        if(stores.activityStore.selectedActivity){\r\n            this.hubConnection = new HubConnectionBuilder()\r\n                .withUrl(process.env.REACT_APP_COMMENT_URL + `?activityId=${activityId}`, {\r\n                    accessTokenFactory: () => stores.userStore.user?.token!\r\n                })\r\n                .withAutomaticReconnect()\r\n                .configureLogging(LogLevel.Information)\r\n                .build();\r\n\r\n            this.hubConnection.start().catch(error => console.log('Error establishing the hub connection: ', error));\r\n\r\n            this.hubConnection.on('LoadComments', (comments: UserComment[]) => {\r\n                runInAction(() => {\r\n                    this.comments = comments.map(comment => {\r\n                        comment.createAt = new Date(comment.createAt + 'Z');\r\n                        return comment;\r\n                    });\r\n                });\r\n            })\r\n\r\n            this.hubConnection.on('ReceiveComment', (comment: UserComment) => {\r\n                comment.createAt = new Date(comment.createAt);\r\n                runInAction(() => this.comments.unshift(comment));\r\n            })\r\n        }\r\n    }\r\n\r\n    stopHubConnection = () => {\r\n        this.hubConnection?.stop().catch(error => console.log('Error stopping the hub connection', error));\r\n    }\r\n\r\n    clearComments = () => {\r\n        this.comments = [];\r\n        this.stopHubConnection();\r\n    }\r\n\r\n    sendComment = async (comment: any) => {\r\n        comment.activityId = stores.activityStore.selectedActivity?.id;\r\n        try {\r\n            await this.hubConnection?.invoke('SendComment', comment);\r\n        } catch (error) {\r\n            console.log('error');\r\n        }\r\n    }\r\n}","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { Button, Container, Dropdown, Image, Menu } from 'semantic-ui-react';\r\nimport useStores from '../stores/stores';\r\n\r\nexport default observer(function NavBar(){\r\n    const {activityStore, userStore:{user, logout, isLoggedIn}} = useStores();\r\n    return (\r\n        <Menu inverted fixed = \"top\">\r\n            <Container>\r\n                <Menu.Item as={NavLink} to='/' exact header>\r\n                    <img src=\"/assets/logo.png\" alt=\"logo\" style = {{marginRight: 10}}/>\r\n                    Reactivities\r\n                </Menu.Item>\r\n                {isLoggedIn && (\r\n                    <>\r\n                        <Menu.Item as={NavLink} to='/activities' name = \"Activities\"/>\r\n                        <Menu.Item >\r\n                            <Button onClick={() => activityStore.cancelSelectActivity()} as={NavLink} to='/creating' positive content = \"Create Activity\"/>\r\n                        </Menu.Item>\r\n                        <Menu.Item position='right'>\r\n                            <Image src={user?.mainPhoto || '/assets/user.png'} avatar spaced='right'/>\r\n                            <Dropdown pointing='top left' text={user?.displayName}>\r\n                                <Dropdown.Menu>\r\n                                    <Dropdown.Item as={Link} to={`/profiles/${user?.userName}`} text='My Profile' icon='user'/>\r\n                                    <Dropdown.Item onClick={logout} text='Logout' icon='power'/>\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </Menu.Item>\r\n                    </>\r\n                )}\r\n                \r\n            </Container>\r\n        </Menu>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport Calendar from 'react-calendar';\r\nimport { Header, Menu } from 'semantic-ui-react';\r\nimport useStores from '../../../app/stores/stores';\r\n\r\nexport default observer(function ActivityFilters(){\r\n    const {activityStore: {predicate, setPredicate}} = useStores();\r\n\r\n    return (\r\n        <>\r\n            <Menu vertical size='large' style={{width: '100%', marginTop: 27.2}}>\r\n                <Header icon='filter' attached color='teal' content='Filters' />\r\n                <Menu.Item \r\n                    content='All Activities'\r\n                    active= {predicate.has('all')}\r\n                    onClick={() => setPredicate('all', 'true')}\r\n                />\r\n                <Menu.Item \r\n                    content=\"I'm going\"\r\n                    active= {predicate.has('isGoing')}\r\n                    onClick={() => setPredicate('isGoing', 'true')}\r\n                />\r\n                <Menu.Item \r\n                    content=\"I'm hosting\"\r\n                    active= {predicate.has('isHost')}\r\n                    onClick={() => setPredicate('isHost', 'true')}\r\n                />\r\n            </Menu>\r\n            <Header />\r\n            <Calendar\r\n                onChange={(date: Date) => setPredicate('startDate', date)}\r\n                value={predicate.get('startDate')}\r\n            />\r\n        </>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport { SyntheticEvent } from 'react';\r\nimport { Reveal, Button } from 'semantic-ui-react';\r\nimport { Profiles } from '../../app/models/profiles';\r\nimport useStores from '../../app/stores/stores';\r\n\r\ninterface Props {\r\n    profiles: Profiles;\r\n}\r\n\r\nexport default observer(function FollowButton({profiles}: Props){\r\n    const {profilesStore: {updateFollowing, isFollowing}, userStore} = useStores();\r\n\r\n    if(userStore.user?.userName === profiles.userName) return null;\r\n\r\n    function handleFollow(e: SyntheticEvent ,username: string){\r\n        e.preventDefault();\r\n        updateFollowing(username, !profiles.isFollowing);\r\n    }\r\n\r\n    return (\r\n        <Reveal animated='move'>\r\n            <Reveal.Content visible style={{width: '100%'}}>\r\n                <Button \r\n                    fluid \r\n                    color='teal' \r\n                    content={profiles.isFollowing ? 'Following' : 'Not follow'}/>\r\n            </Reveal.Content>\r\n            <Reveal.Content hidden style={{width: '100%'}}>\r\n                <Button \r\n                    basic\r\n                    fluid \r\n                    color= {profiles.isFollowing ? 'red' : 'green'}\r\n                    content= {profiles.isFollowing ? 'Unfollow' : 'Follow'}\r\n                    loading={isFollowing}\r\n                    onClick = {e => handleFollow(e, profiles.userName)}\r\n                />\r\n            </Reveal.Content>\r\n        </Reveal>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {Card, Icon, Image} from 'semantic-ui-react';\r\nimport { Profiles } from '../../app/models/profiles';\r\nimport useStores from '../../app/stores/stores';\r\nimport FollowButton from './FollowButton';\r\n\r\ninterface Props {\r\n    profiles: Profiles;\r\n}\r\n\r\nexport default observer(function ProfilesCard({profiles}: Props){\r\n\r\n    const {userStore} = useStores();\r\n\r\n    return (\r\n        <Card as={Link} to={`/profiles/${profiles.userName}`} color={profiles.isFollowing ? 'orange': 'grey'}>\r\n            <Card.Content>\r\n                <Image size='mini' floated='right' wrapped ui={true} src={profiles.mainPhoto || '/assets/user.png'}/>\r\n                <Card.Header>{profiles.displayName}</Card.Header>\r\n                <Card.Description>Bio goes here</Card.Description>\r\n            </Card.Content>\r\n            <Card.Content extra>\r\n                <Icon name='user'/>\r\n                {profiles.followersCount} followers\r\n            </Card.Content>\r\n            {profiles.userName !== userStore.user!.userName && (\r\n                <Card.Content extra>\r\n                    <FollowButton profiles={profiles} />\r\n                </Card.Content>\r\n            )}\r\n        </Card>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { List, Image, Popup } from 'semantic-ui-react';\r\nimport { Profiles } from '../../../app/models/profiles';\r\nimport ProfileCard from '../../profiles/ProfilesCard';\r\n\r\ninterface Props {\r\n    attendees: Profiles[];\r\n}\r\n\r\nexport default observer(function ActivityItemAttendee({attendees}: Props){\r\n    const styles = {\r\n        borderColor: 'orange',\r\n        borderWidth: 3,\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    return (\r\n        <List horizontal>\r\n            {attendees.map(attendee => (\r\n                <Popup\r\n                    hoverable\r\n                    key={attendee.userName}\r\n                    trigger = {\r\n                        <List.Item key={attendee.userName}>\r\n                            <Image \r\n                                size='mini' \r\n                                circular \r\n                                src={attendee.mainPhoto || '/assets/user.png'}\r\n                                bordered\r\n                                style={attendee.isFollowing ? styles : {cursor: 'pointer'}}\r\n                            />\r\n                        </List.Item>\r\n                    }\r\n                >\r\n                    <Popup.Content>\r\n                        <ProfileCard profiles={attendee}/>\r\n                    </Popup.Content>\r\n                </Popup>\r\n                \r\n            ))}\r\n        </List>\r\n    )\r\n})","import { format } from 'date-fns';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Icon, Item, Label, Segment } from 'semantic-ui-react';\r\nimport { Activity } from '../../../app/models/activity';\r\nimport ActivityItemAttendee from './ActivityItemAttendee';\r\n\r\ninterface Props{\r\n    activity: Activity;\r\n}\r\n\r\nexport default function ActivityItem({activity}: Props){\r\n    return (\r\n        <Segment.Group>\r\n            <Segment>\r\n                {activity.isCancelled && (\r\n                    <Label attached='top' color='red' content='Cancelled' style={{textAlign: 'center'}}/>\r\n                )}\r\n                <Item.Group>\r\n                    <Item>\r\n                        <Item.Image style={{marginBottom: 5}} size='tiny' circular src={activity.host?.mainPhoto || '/assets/user.png'}/>\r\n                        <Item.Content>\r\n                            <Item.Header as={Link} to={`/details/${activity.id}`}>\r\n                                {activity.title}\r\n                            </Item.Header>\r\n                            <Item.Description>\r\n                                Hosted by <Link to={`profiles/${activity.host?.userName}`}><strong>{activity.host?.displayName}</strong></Link> \r\n                            </Item.Description>\r\n                            {activity.isHost && (\r\n                                <Item.Description>\r\n                                    <Label basic color='orange'>\r\n                                        You are hosting this activity !\r\n                                    </Label>\r\n                                </Item.Description>\r\n                            )}\r\n                            {activity.isGoing && !activity.isHost && (\r\n                                <Item.Description>\r\n                                    <Label basic color='green'>\r\n                                        You are going to this activity !\r\n                                    </Label>\r\n                                </Item.Description>\r\n                            )}\r\n                        </Item.Content>\r\n                    </Item>\r\n                </Item.Group>\r\n            </Segment>\r\n            <Segment>\r\n                <span>\r\n                    <Icon name='clock'/>{format(activity.date!, 'dd MMM yyyy h:mm aa')}\r\n                    <Icon name='marker'/>{activity.venue}\r\n                </span>\r\n            </Segment>\r\n            <Segment secondary>\r\n                <ActivityItemAttendee attendees={activity.attendees!}/>\r\n            </Segment>\r\n            <Segment clearing>\r\n                <span>{activity.description}</span>\r\n                <Button\r\n                    as={Link}\r\n                    to={`/details/${activity.id}`}\r\n                    color='teal'\r\n                    floated='right'\r\n                    content='View'\r\n                />\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n}","import { observer } from 'mobx-react-lite';\r\nimport React, { Fragment } from 'react';\r\nimport {Header } from 'semantic-ui-react';\r\nimport useStores from '../../../app/stores/stores';\r\nimport ActivityItem from './ActivityItem';\r\n\r\nexport default observer(function ActivityList(){\r\n    const {activityStore} = useStores();\r\n    return(\r\n        <>\r\n            {activityStore.groupedActivities.map(([group, activities]) => (\r\n                <Fragment key={group}>\r\n                    <Header sub color='teal'>\r\n                        {group}\r\n                    </Header>\r\n                    {activities.map(activity => (\r\n                        <ActivityItem key={activity.id} activity={activity}/>\r\n                    ))}\r\n                </Fragment>\r\n            ))}\r\n        </>\r\n    )\r\n})","import React, { Fragment } from 'react';\r\nimport { Segment, Button, Placeholder } from 'semantic-ui-react';\r\n\r\nexport default function ActivityPlaceholder() {\r\n    return (\r\n        <Fragment>\r\n            <Placeholder fluid style={{ marginTop: 25 }}>\r\n                <Segment.Group>\r\n                    <Segment style={{ minHeight: 110 }}>\r\n                        <Placeholder>\r\n                            <Placeholder.Header image>\r\n                                <Placeholder.Line />\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Header>\r\n                            <Placeholder.Paragraph>\r\n                                <Placeholder.Line />\r\n                            </Placeholder.Paragraph>\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment>\r\n                        <Placeholder>\r\n                            <Placeholder.Line />\r\n                            <Placeholder.Line />\r\n                        </Placeholder>\r\n                    </Segment>\r\n                    <Segment secondary style={{ minHeight: 70 }} />\r\n                    <Segment clearing>\r\n                        <Button disabled color='blue' floated='right' content='View' />\r\n                    </Segment>\r\n                </Segment.Group>\r\n            </Placeholder>\r\n        </Fragment>\r\n    );\r\n};\r\n","import { observer } from 'mobx-react-lite';\r\nimport React, { useEffect, useState } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport { Grid } from 'semantic-ui-react';\r\nimport { PagingParams } from '../../../app/models/pagination';\r\nimport useStores from '../../../app/stores/stores';\r\nimport ActivityFilters from './ActivityFilters';\r\nimport ActivityList from './ActivityList';\r\nimport ActivityPlaceholder from './ActivityPlaceholder';\r\n\r\nexport default observer(function ActivityDashboard(){\r\n    const {activityStore} = useStores();\r\n    const [loadingNext, setLoadingNext] = useState(false);\r\n\r\n    function handleLoadingNext(){\r\n        setLoadingNext(true);\r\n        activityStore.setPagingParams(new PagingParams(activityStore.pagination!.currentPage + 1));\r\n        activityStore.loadActivities().then(() => setLoadingNext(false));\r\n    }\r\n\r\n    useEffect(() =>{\r\n        activityStore.loadActivities();\r\n    }, [activityStore])\r\n\r\n    return(\r\n        <Grid>\r\n            <Grid.Column width='10'>\r\n                {activityStore.isLoading && !loadingNext ? (\r\n                    <>\r\n                        <ActivityPlaceholder/>\r\n                        <ActivityPlaceholder/>\r\n                        <ActivityPlaceholder/>\r\n                    </>\r\n                ): (\r\n                    <InfiniteScroll\r\n                        pageStart={0}\r\n                        loadMore={handleLoadingNext}\r\n                        hasMore={!loadingNext && !!activityStore.pagination && activityStore.pagination.currentPage < activityStore.pagination.totalPages}\r\n                        initialLoad={false}\r\n                    >\r\n                        <ActivityList />\r\n                    </InfiniteScroll>\r\n                )}\r\n                \r\n            </Grid.Column>\r\n            <Grid.Column width='6'>\r\n                <ActivityFilters/>\r\n            </Grid.Column>\r\n            <Grid.Column width='10'>\r\n                {loadingNext && (\r\n                    <>\r\n                        <ActivityPlaceholder/>\r\n                        <ActivityPlaceholder/>\r\n                        <ActivityPlaceholder/>\r\n                    </>\r\n                )}\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n})","import { useField } from 'formik';\r\nimport React from 'react';\r\nimport { FormField, Label } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    placeholder:string;\r\n    name: string;\r\n    type?: string;\r\n    label?: string;\r\n}\r\n\r\nexport default function MyTextInput(props: Props){\r\n    const [field, meta] = useField(props.name);\r\n    return (\r\n        <FormField error={meta.touched && !!meta.error}>\r\n            <label>{props.label}</label>\r\n            <input {...field} {...props} />\r\n            {meta.touched && meta.error ? (\r\n                <Label basic color='red'>{meta.error}</Label>\r\n            ) : null}\r\n        </FormField>\r\n    )\r\n}","import { Formik, Form, ErrorMessage } from 'formik';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Button, Header, Label } from 'semantic-ui-react';\r\nimport MyTextInput from '../../app/common/form/MyTextInput';\r\nimport useStores from '../../app/stores/stores';\r\n\r\nexport default observer(function LoginForm(){\r\n    const {userStore} = useStores();\r\n    return (\r\n        <Formik\r\n            initialValues={{email: '', password: '', error: null}}\r\n            onSubmit = {(values, {setErrors})=> userStore.login(values).catch(error => setErrors({error: error.response.data}))}\r\n        >\r\n            {({handleSubmit, isSubmitting, dirty, errors}) => (\r\n                <Form className='ui form' onSubmit={handleSubmit} autoComplete='off'>\r\n                    <Header as='h2' content = 'Login to Reactivities' color='teal' textAlign='center' />\r\n                    <MyTextInput name='email' placeholder='Email'/>\r\n                    <MyTextInput name='password' placeholder='Password' type='password'/>\r\n                    <ErrorMessage \r\n                        name='error' render={() => <Label style={{marginBottom: 10}} basic color='red' content={errors.error}/>}\r\n                    />\r\n                    <Button\r\n                        disabled = {isSubmitting || !dirty} \r\n                        loading={isSubmitting} \r\n                        positive \r\n                        type='submit' \r\n                        content='Submit'\r\n                        fluid\r\n                    />\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n})","import React from 'react';\r\nimport { Message } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    errors: any;\r\n}\r\n\r\nexport default function ValidationError({errors}: Props){\r\n    return (\r\n        <Message error>\r\n            {errors && (\r\n                <Message.List>\r\n                    {errors.map((error: any, i: any) => (\r\n                        <Message.Item key={i}>{error}</Message.Item>\r\n                    ))}\r\n                </Message.List>\r\n            )}\r\n        </Message>\r\n    )\r\n}","import { Formik, Form, ErrorMessage } from 'formik';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Button, Header } from 'semantic-ui-react';\r\nimport MyTextInput from '../../app/common/form/MyTextInput';\r\nimport useStores from '../../app/stores/stores';\r\nimport * as Yup from 'yup';\r\nimport ValidationError from '../errors/ValidationError';\r\n\r\nexport default observer(function RegisterForm(){\r\n    const {userStore} = useStores();\r\n\r\n    const validationSchema = Yup.object({\r\n        displayName: Yup.string().required('The display name is required !'),\r\n        userName: Yup.string().required('The username is required !'),\r\n        email: Yup.string().required('The username is required !').email('Email must be a valid email !'),\r\n        password: Yup.string().required('The password is required !').matches(/(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,10}$/, 'Password must contain 6-10 characters, consist of number, lowercase, uppercase.')\r\n    })\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={{displayName: '' , userName: '' ,email: '', password: '', error: null}}\r\n            onSubmit = {(values, {setErrors}) => \r\n                userStore.register(values).catch(error => setErrors({error}))}\r\n            \r\n            validationSchema = {validationSchema}\r\n        >\r\n            {({handleSubmit, isSubmitting, dirty, isValid, errors}) => (\r\n                <Form className='ui form error' onSubmit={handleSubmit} autoComplete='off'>\r\n                    <Header as='h2' content = 'Register to Reactivities' color='teal' textAlign='center' />\r\n                    <MyTextInput name='displayName' placeholder='Display Name'/>\r\n                    <MyTextInput name='email' placeholder='Email'/>\r\n                    <MyTextInput name='userName' placeholder='Username'/>\r\n                    <MyTextInput name='password' placeholder='Password' type='password'/>\r\n                    <ErrorMessage \r\n                        name='error' render={() => <ValidationError errors={errors.error}/>}\r\n                    />\r\n                    <Button\r\n                        disabled = {isSubmitting || !dirty || !isValid} \r\n                        loading={isSubmitting} \r\n                        positive \r\n                        type='submit' \r\n                        content='Register'\r\n                        fluid\r\n                    />\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Container, Divider, Header, Image, Segment } from 'semantic-ui-react';\r\nimport useStores from '../../../app/stores/stores';\r\nimport LoginForm from '../../users/LoginForm';\r\nimport RegisterForm from '../../users/RegisterForm';\r\n\r\nexport default observer(function HomePage(){\r\n    const {userStore, modalStore} = useStores();\r\n    return (\r\n        <Segment inverted textAlign='center' vertical className='masthead'>\r\n            <Container text>\r\n                <Header as='h1' inverted>\r\n                    <Image size='massive' src='/assets/logo.png' alt='logo' style={{marginBottom: 12}}/>\r\n                    Reactivities \r\n                </Header>\r\n                {userStore.isLoggedIn ? (\r\n                    <>\r\n                        <Header as='h2' inverted content='Welcome to Reactivities'/> \r\n                        <Button as={Link} to='/activities' size='huge' inverted>\r\n                            Go to Activities !\r\n                        </Button>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <Button onClick={() => modalStore.openModal(<LoginForm/>)} size='huge' inverted>\r\n                            Login\r\n                        </Button>\r\n                        <Button onClick={() => modalStore.openModal(<RegisterForm/>)} size='huge' inverted>\r\n                            Register\r\n                        </Button>\r\n                        <Divider horizontal inverted>Or</Divider>\r\n                        <Button\r\n                            size='huge'\r\n                            inverted\r\n                            color='facebook'\r\n                            content='Login with Facebook'\r\n                            onClick={userStore.facebookLogin}\r\n                            loading={userStore.fbLoading}\r\n                        />\r\n                    </>\r\n                    \r\n                )}\r\n            </Container>\r\n        </Segment>\r\n    )\r\n})","import React from 'react';\r\nimport { Dimmer, Loader } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    inverted?: boolean,\r\n    content?: string\r\n}\r\n\r\nexport default function Loading({inverted=true, content='Loading...'}: Props){\r\n    return (\r\n        <Dimmer active inverted={inverted}>\r\n            <Loader size='large'>{content}</Loader>\r\n        </Dimmer>\r\n    )\r\n}","import { useField } from 'formik';\r\nimport React from 'react';\r\nimport { FormField, Label } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    placeholder:string;\r\n    name: string;\r\n    rows: number;\r\n    label?: string;\r\n}\r\n\r\nexport default function MyTextArea(props: Props){\r\n    const [field, meta] = useField(props.name);\r\n    return (\r\n        <FormField error={meta.touched && !!meta.error}>\r\n            <label>{props.label}</label>\r\n            <textarea {...field} {...props} />\r\n            {meta.touched && meta.error ? (\r\n                <Label basic color='red'>{meta.error}</Label>\r\n            ) : null}\r\n        </FormField>\r\n    )\r\n}","import { useField } from 'formik';\r\nimport React from 'react';\r\nimport { FormField, Label, Select } from 'semantic-ui-react';\r\n\r\ninterface Props{\r\n    placeholder:string;\r\n    name: string;\r\n    options: any;\r\n    label?: string;\r\n}\r\n\r\nexport default function MySelectInput(props: Props){\r\n    const [field, meta, helpers] = useField(props.name);\r\n    return (\r\n        <FormField error={meta.touched && !!meta.error}>\r\n            <label>{props.label}</label>\r\n            <Select\r\n                clearable\r\n                options = {props.options}\r\n                placeholder = {props.placeholder}\r\n                value={field.value || null}\r\n                onChange={(e,d) => helpers.setValue(d.value)}\r\n                onBlur={() => helpers.setTouched(true)}\r\n            />\r\n            {meta.touched && meta.error ? (\r\n                <Label basic color='red'>{meta.error}</Label>\r\n            ) : null}\r\n        </FormField>\r\n    )\r\n}","export const categoryOptions = [\r\n    {text:'Drinks',value: 'drinks'},\r\n    {text:'Culture',value: 'culture'},\r\n    {text:'Film',value: 'film'},\r\n    {text:'Food',value: 'food'},\r\n    {text:'Music',value: 'music'},\r\n    {text:'Travel',value: 'travel'},\r\n] ","import { useField } from 'formik';\r\nimport React from 'react';\r\nimport { FormField, Label } from 'semantic-ui-react';\r\nimport DatePicker,{ReactDatePickerProps} from 'react-datepicker';\r\n\r\nexport default function MyTextInput(props: Partial<ReactDatePickerProps>){\r\n    const [field, meta, helpers] = useField(props.name!);\r\n    return (\r\n        <FormField error={meta.touched && !!meta.error}>\r\n            <DatePicker\r\n                {...field}\r\n                {...props}\r\n                selected={(field.value && new Date(field.value)) || null}\r\n                onChange={value => helpers.setValue(value)}\r\n            />\r\n            {meta.touched && meta.error ? (\r\n                <Label basic color='red'>{meta.error}</Label>\r\n            ) : null}\r\n        </FormField>\r\n    )\r\n}","import { Formik, Form } from 'formik';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { Button, Header, Segment } from 'semantic-ui-react';\r\nimport Loading from '../../../app/layout/Loading';\r\nimport useStores from '../../../app/stores/stores';\r\nimport * as Yup from 'yup';\r\nimport MyTextInput from '../../../app/common/form/MyTextInput';\r\nimport MyTextArea from '../../../app/common/form/MyTextArea';\r\nimport MySelectInput from '../../../app/common/form/MySelectInput';\r\nimport { categoryOptions } from '../../../app/common/options/categoryOptions';\r\nimport MyDatePicker from '../../../app/common/form/MyDatePicker';\r\nimport { ActivityFormValues } from '../../../app/models/activity';\r\nimport { history } from '../../..';\r\n\r\nexport default observer(function ActivityForm(){\r\n    const {activityStore} = useStores();\r\n    const {id} = useParams<{id: string}>();\r\n\r\n    const [activity, setActivity] = useState<ActivityFormValues>(new ActivityFormValues());\r\n\r\n    const validationSchema = Yup.object({\r\n        title: Yup.string().required('The activity title is required !'),\r\n        description: Yup.string().required('The activity description is required !'),\r\n        category: Yup.string().required(),\r\n        city: Yup.string().required('The city is required !'),\r\n        venue: Yup.string().required('The venue is required !'),\r\n        date: Yup.date().nullable().required('The activity date is required !')\r\n    })\r\n\r\n    function handleFormSubmit(activity: ActivityFormValues) {\r\n        activityStore.submitActivity(activity).then(() => {\r\n            history.push(`/details/${activityStore.selectedActivity!.id}`)\r\n        });\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if(id){\r\n            activityStore.loadActivityDetail(id).then((activity) => {\r\n                setActivity(new ActivityFormValues(activity))\r\n            })\r\n        }\r\n    }, [activityStore, id])\r\n\r\n    if(!activityStore.selectedActivity && id) return <Loading content = 'Loading select activity...'/>\r\n\r\n    return (\r\n        <Segment clearing>\r\n            <Formik validationSchema={validationSchema} enableReinitialize initialValues={activity} onSubmit={values => handleFormSubmit(values)}>\r\n                {({handleSubmit, isSubmitting, isValid, dirty }) => (\r\n                    <Form className='ui form' onSubmit={handleSubmit} autoComplete='off'>\r\n                        <Header content='Activity Details' sub color='teal'/>\r\n                        <MyTextInput name='title' placeholder='Title'/>\r\n                        <MyTextArea rows={4} placeholder='Description' name='description'/>\r\n                        <MySelectInput options={categoryOptions} placeholder='Category' name='category'/>\r\n                        <MyDatePicker \r\n                            placeholderText='Date' \r\n                            name='date' \r\n                            showTimeSelect\r\n                            timeCaption='time'\r\n                            dateFormat='dd MMM yyyy h:mm aa'\r\n                        />\r\n                        <Header content='Location Details' sub color='teal'/>\r\n                        <MyTextInput placeholder='City' name='city'/>\r\n                        <MyTextInput placeholder='Venue' name='venue'/>\r\n                        <Button\r\n                            disabled = {isSubmitting || !dirty || !isValid} \r\n                            loading={isSubmitting} \r\n                            floated='right' \r\n                            positive \r\n                            type='submit' \r\n                            content='Submit'\r\n                        />\r\n                        <Button as={Link} to='/activities' floated='right' type='button' content='Cancel'/>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </Segment>\r\n    )\r\n})","import { Formik, Form, Field, FieldProps } from 'formik';\r\nimport { observer } from 'mobx-react-lite'\r\nimport React, { useEffect } from 'react'\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport {Segment, Header, Comment, Loader, Button} from 'semantic-ui-react'\r\nimport useStores from '../../../app/stores/stores';\r\nimport * as Yup from 'yup';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\nexport default observer(function ActivityDetailsChat() {\r\n    const {id} = useParams<{id: string}>();\r\n\r\n    const {commentStore, userStore} = useStores();\r\n\r\n    useEffect(() => {\r\n        if(id){\r\n            commentStore.createHubConnection(id);\r\n        }\r\n        return () => commentStore.clearComments();\r\n    }, [commentStore, id])\r\n\r\n    const validationSchema = Yup.object({\r\n        body: Yup.string().required('Comment body cannot be empty!')\r\n    })\r\n\r\n    return (\r\n        <>\r\n            <Segment\r\n                textAlign='center'\r\n                attached='top'\r\n                inverted\r\n                color='teal'\r\n                style={{border: 'none'}}\r\n            >\r\n                <Header>Chat about this event</Header>\r\n            </Segment>\r\n            <Segment attached clearing>\r\n                <Comment.Group>\r\n                    {commentStore.comments.map(comment => (\r\n                        <Comment key={comment.id}>\r\n                            <Comment.Avatar src={comment.photo || '/assets/user.png'}/>\r\n                            <Comment.Content>\r\n                                {comment.userName === userStore.user?.userName && (\r\n                                    <Button \r\n                                        basic \r\n                                        color='red' \r\n                                        icon='trash'\r\n                                        floated='right'\r\n                                        size='mini'\r\n                                    />\r\n                                )}\r\n                                \r\n                                <Comment.Author as={Link} to={`/profiles/${comment.userName}`}>\r\n                                    <strong>{comment.displayName}</strong>\r\n                                </Comment.Author>\r\n                                <Comment.Metadata>\r\n                                    <div>{formatDistanceToNow(comment.createAt) + ' ago'}</div>\r\n                                </Comment.Metadata>\r\n                                <Comment.Text style={{whiteSpace: 'pre-wrap'}}>\r\n                                    {comment.body}\r\n                                </Comment.Text>\r\n                                \r\n                            </Comment.Content>\r\n                        </Comment>\r\n                    ))}\r\n\r\n                    <Formik\r\n                        onSubmit={(values, {resetForm}) => \r\n                            commentStore.sendComment(values).then(() => resetForm())}\r\n                        initialValues={{body: ''}}\r\n                        validationSchema={validationSchema}\r\n                    >\r\n                        {({isSubmitting, isValid, handleSubmit}) => (\r\n                            <Form className='ui form' style={{marginTop: 20}}>\r\n                                <Field name='body'>\r\n                                    {(props: FieldProps) => (\r\n                                        <div style={{position: 'relative'}}>\r\n                                            <Loader active={isSubmitting}/>\r\n                                            <textarea\r\n                                                placeholder='Add comment (Enter to submit, SHIFT + Enter for new line)'\r\n                                                rows={4}\r\n                                                {...props.field}\r\n                                                onKeyPress={e => {\r\n                                                    if(e.key === 'Enter' && e.shiftKey){\r\n                                                        return;\r\n                                                    }\r\n                                                    if(e.key === 'Enter' && !e.shiftKey){\r\n                                                        e.preventDefault();\r\n                                                        isValid && handleSubmit();\r\n                                                    }\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </Field>\r\n                            </Form>\r\n                        )}\r\n                    </Formik>\r\n                </Comment.Group>\r\n            </Segment>\r\n        </>\r\n    )\r\n})","import { format } from 'date-fns';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport {Button, Header, Item, Segment, Image, Label} from 'semantic-ui-react'\r\nimport {Activity} from \"../../../app/models/activity\";\r\nimport useStores from '../../../app/stores/stores';\r\n\r\nconst activityImageStyle = {\r\n    filter: 'brightness(30%)'\r\n};\r\n\r\nconst activityImageTextStyle = {\r\n    position: 'absolute',\r\n    bottom: '5%',\r\n    left: '5%',\r\n    width: '100%',\r\n    height: 'auto',\r\n    color: 'white'\r\n};\r\n\r\ninterface Props {\r\n    activity: Activity\r\n}\r\n\r\nexport default observer (function ActivityDetailsHeader({activity}: Props) {\r\n    const {activityStore: {updateAttendance, isSubmitting, cancelActivityToggle}} = useStores();\r\n    return (\r\n        <Segment.Group>\r\n            <Segment basic attached='top' style={{padding: '0'}}>\r\n                {activity.isCancelled && (\r\n                    <Label style={{position: 'absolute', zIndex: 1000, left: -14, top: 20}} ribbon color='red' content='Cancelled'/>\r\n                )}\r\n                <Image src={`/assets/categoryImages/${activity.category}.jpg`} fluid style={activityImageStyle}/>\r\n                <Segment style={activityImageTextStyle} basic>\r\n                    <Item.Group>\r\n                        <Item>\r\n                            <Item.Content>\r\n                                <Header\r\n                                    size='huge'\r\n                                    content={activity.title}\r\n                                    style={{color: 'white'}}\r\n                                />\r\n                                <p>{format(activity.date!, 'dd MMM yyyy')}</p>\r\n                                <p>\r\n                                    Hosted by \r\n                                    <Link to={`/profile/${activity.host?.userName}`} >\r\n                                        <strong> {activity.host?.displayName}</strong>\r\n                                    </Link>\r\n                                </p>\r\n                            </Item.Content>\r\n                        </Item>\r\n                    </Item.Group>\r\n                </Segment>\r\n            </Segment>\r\n            <Segment clearing attached='bottom'>\r\n                {activity.isHost ? (\r\n                    <>\r\n                        <Button\r\n                            color={activity.isCancelled ? 'green' : 'red'}\r\n                            floated='left'\r\n                            basic\r\n                            content={activity.isCancelled ? 'Re-activate Activity' : 'Cancel Activity'}\r\n                            onClick={cancelActivityToggle} \r\n                            loading = {isSubmitting}\r\n                        />\r\n                        <Button disabled={activity.isCancelled} color='orange' floated='right' as={Link} to={`/updating/${activity.id}`}>\r\n                            Update Event\r\n                        </Button>\r\n                    </>\r\n                    \r\n                ) : activity.isGoing ? (\r\n                    <Button \r\n                        onClick = {() => updateAttendance(activity.id)}\r\n                        loading = {isSubmitting}\r\n                    > Cancel attendance</Button>\r\n                ) : (\r\n                    <Button \r\n                        onClick = {() => updateAttendance(activity.id)} color='teal'\r\n                        loading = {isSubmitting}\r\n                        disabled={activity.isCancelled}\r\n                    >Join Activity</Button>\r\n                )}\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n})\r\n","import { format } from 'date-fns';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React from 'react'\r\nimport {Segment, Grid, Icon} from 'semantic-ui-react'\r\nimport {Activity} from \"../../../app/models/activity\";\r\n\r\ninterface Props {\r\n    activity: Activity\r\n}\r\n\r\nexport default observer(function ActivityDetailsInfo({activity}: Props) {\r\n    return (\r\n        <Segment.Group>\r\n            <Segment attached='top'>\r\n                <Grid>\r\n                    <Grid.Column width={1}>\r\n                        <Icon size='large' color='teal' name='info'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={15}>\r\n                        <p>{activity.description}</p>\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n            <Segment attached>\r\n                <Grid verticalAlign='middle'>\r\n                    <Grid.Column width={1}>\r\n                        <Icon name='calendar' size='large' color='teal'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={15}>\r\n                        <span>\r\n                            {format(activity.date!, 'dd MMM yyyy h:mm aa')}\r\n                        </span>\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n            <Segment attached>\r\n                <Grid verticalAlign='middle'>\r\n                    <Grid.Column width={1}>\r\n                        <Icon name='marker' size='large' color='teal'/>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={11}>\r\n                        <span>{activity.venue}, {activity.city}</span>\r\n                    </Grid.Column>\r\n                </Grid>\r\n            </Segment>\r\n        </Segment.Group>\r\n    )\r\n})","import React from 'react'\r\nimport { Segment, List, Label, Item, Image } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Activity } from '../../../app/models/activity'\r\n\r\ninterface Props{\r\n    activity: Activity;\r\n}\r\n\r\nexport default observer(function ActivityDetailsSidebar ({activity : {attendees, host}}: Props) {\r\n    if(!attendees) return null;\r\n    const numOfFollowing = attendees.length;\r\n    return (\r\n        <>\r\n            <Segment\r\n                textAlign='center'\r\n                style={{ border: 'none' }}\r\n                attached='top'\r\n                secondary\r\n                inverted\r\n                color='teal'\r\n            >\r\n                {numOfFollowing} {numOfFollowing === 1 ? ' Person Going' : ' People Going'} \r\n            </Segment>\r\n            <Segment attached>\r\n                <List relaxed divided>\r\n                    {attendees.map((attendee) =>(\r\n                        <Item style={{ position: 'relative' }} key={attendee.userName}>\r\n                            {host?.userName === attendee.userName && (\r\n                                <Label\r\n                                    style={{ position: 'absolute' }}\r\n                                    color='orange'\r\n                                    ribbon='right'\r\n                                >\r\n                                    Host\r\n                                </Label>\r\n                            )}\r\n                            <Image size='tiny' src={attendee.mainPhoto || '/assets/user.png'} />\r\n                            <Item.Content verticalAlign='middle'>\r\n                                <Item.Header as='h3'>\r\n                                    <Link to={`/profiles/${attendee.userName}`}>{attendee.displayName}</Link>\r\n                                </Item.Header>\r\n                                {attendee.isFollowing && (<Item.Extra style={{ color: 'orange' }}>Following</Item.Extra>)}\r\n                            </Item.Content>\r\n                        </Item>\r\n                    ))}\r\n                </List>\r\n            </Segment>\r\n        </>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React, { useEffect } from 'react';\r\nimport {useParams } from 'react-router-dom';\r\nimport {Grid} from 'semantic-ui-react';\r\nimport Loading from '../../../app/layout/Loading';\r\nimport useStores from '../../../app/stores/stores';\r\nimport ActivityDetailsChat from './ActivityDetailsChat';\r\nimport ActivityDetailsHeader from './ActivityDetailsHeader';\r\nimport ActivityDetailsInfo from './ActivityDetailsInfo';\r\nimport ActivityDetailsSidebar from './ActivityDetailsSidebar';\r\n\r\n\r\nexport default observer(function ActivityDetails(){\r\n    const {activityStore} = useStores();\r\n    const {selectedActivity, cancelSelectActivity} = activityStore;\r\n    const {id} = useParams<{id: string}>();\r\n    useEffect(()=> {\r\n        if(id){\r\n            activityStore.loadActivityDetail(id);\r\n        }\r\n        return () => cancelSelectActivity();\r\n    },[activityStore, id, cancelSelectActivity]);\r\n\r\n    if(!selectedActivity) return <Loading content = 'Loading select activity...'/>\r\n\r\n    return(\r\n        <Grid>\r\n            <Grid.Column width={10}>\r\n                <ActivityDetailsHeader activity={selectedActivity!} />\r\n                <ActivityDetailsInfo activity={selectedActivity!} />\r\n                <ActivityDetailsChat />\r\n            </Grid.Column>\r\n            <Grid.Column width={6}>\r\n                <ActivityDetailsSidebar activity = {selectedActivity} />\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n})","import React from 'react';\r\nimport {Button, Header, Segment} from \"semantic-ui-react\";\r\nimport axios from 'axios';\r\n\r\nexport default function TestErrors() {\r\n    const baseUrl = process.env.REACT_APP_API_URL;\r\n\r\n    function handleNotFound() {\r\n        axios.get(baseUrl + 'buggy/not-found').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleBadRequest() {\r\n        axios.get(baseUrl + 'buggy/bad-request').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleServerError() {\r\n        axios.get(baseUrl + 'buggy/server-error').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleUnauthorised() {\r\n        axios.get(baseUrl + 'buggy/unauthorised').catch(err => console.log(err.response));\r\n    }\r\n\r\n    function handleBadGuid() {\r\n        axios.get(baseUrl + 'activities/notaguid').catch(err => console.log(err));\r\n    }\r\n\r\n    function handleValidationError() {\r\n        axios.post(baseUrl + 'activities', {}).catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header as='h1' content='Test Error component' />\r\n            <Segment>\r\n                <Button.Group widths='7'>\r\n                    <Button onClick={handleNotFound} content='Not Found' basic primary />\r\n                    <Button onClick={handleBadRequest} content='Bad Request' basic primary />\r\n                    <Button onClick={handleValidationError} content='Validation Error' basic primary />\r\n                    <Button onClick={handleServerError} content='Server Error' basic primary />\r\n                    <Button onClick={handleUnauthorised} content='Unauthorised' basic primary />\r\n                    <Button onClick={handleBadGuid} content='Bad Guid' basic primary />\r\n                </Button.Group>\r\n            </Segment>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Header, Icon, Segment } from 'semantic-ui-react';\r\n\r\nexport default function NotFound(){\r\n    return (\r\n        <Segment placeholder>\r\n            <Header icon>\r\n                <Icon name=\"search\" />\r\n                Oops - We've looked everywhere and could not found this !!!\r\n            </Header>\r\n            <Segment.Inline>\r\n                <Button as={Link} to='/activities' primary>\r\n                    Return to Activities Page\r\n                </Button>\r\n            </Segment.Inline>\r\n        </Segment>\r\n    )\r\n}","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Container, Header, Segment } from 'semantic-ui-react';\r\nimport useStores from '../../app/stores/stores';\r\n\r\nexport default observer(function ServerError(){\r\n    const {commonStore} = useStores();\r\n    return (\r\n        <Container>\r\n            <Header as='h1' content='Server Error' />\r\n            <Header sub as='h5' color='red' content={commonStore.serverError?.message} />\r\n            {commonStore.serverError?.details && (\r\n                <Segment>\r\n                    <Header as='h4' content='Stack Trace' color='teal'/>\r\n                    <code style={{marginTop: '10px'}}>{commonStore.serverError?.details}</code>\r\n                </Segment>\r\n            )}\r\n        </Container>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Modal } from 'semantic-ui-react';\r\nimport useStores from '../../stores/stores';\r\n\r\nexport default observer(function ModalContainer(){\r\n    const {modalStore} = useStores();\r\n    return (\r\n        <Modal open={modalStore.modal.open} onClose={modalStore.closeModal} size='mini'>\r\n            <Modal.Content>\r\n                {modalStore.modal.body}\r\n            </Modal.Content>\r\n        </Modal>\r\n    )\r\n})","import { format } from 'date-fns';\r\nimport { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {Card, Image} from 'semantic-ui-react';\r\nimport { UserActivity } from '../../app/models/activity';\r\n\r\ninterface Props {\r\n    activity: UserActivity;\r\n}\r\n\r\nexport default observer(function ProfilesEventCard({activity}: Props){\r\n\r\n    return (\r\n        <Card as={Link} to={`/details/${activity.id}`}>\r\n            <Image size='massive' wrapped ui={true} src={`/assets/categoryImages/${activity.category}.jpg`} />\r\n            <Card.Content>\r\n                <Card.Header textAlign='center'>{activity.title}</Card.Header>\r\n                <Card.Meta textAlign='center'>\r\n                    <span className='date'>{format(activity.date!, 'dd MMM yyyy')}</span>\r\n                </Card.Meta>\r\n                <Card.Meta textAlign='center'>\r\n                    <span className='date'>{format(activity.date!, 'h:mm aa')}</span>\r\n                </Card.Meta>\r\n            </Card.Content>\r\n        </Card>\r\n    )\r\n})","import { observer } from 'mobx-react-lite'\r\nimport React from 'react'\r\nimport { Menu } from 'semantic-ui-react'\r\nimport useStores from '../../app/stores/stores';\r\n\r\nexport default observer(function ProfilesEventsMenu()  {\r\n    const {profilesStore} = useStores();\r\n    const {activeEventMenu, setActiveEventMenu, loadingUserActivities} = profilesStore;\r\n\r\n    function handleItemClick(activeMenu: string){\r\n        setActiveEventMenu(activeMenu);\r\n    }\r\n\r\n    return (\r\n        <Menu pointing secondary>\r\n            <Menu.Item\r\n                name='Future Events'\r\n                active={activeEventMenu === 'future'}\r\n                disabled = {activeEventMenu !== 'future' && loadingUserActivities}\r\n                onClick={() => handleItemClick('future')}\r\n            />\r\n            <Menu.Item\r\n                name='Past Events'\r\n                active={activeEventMenu === 'past'}\r\n                disabled = {activeEventMenu !== 'past' && loadingUserActivities}\r\n                onClick={() => handleItemClick('past')}\r\n            />\r\n            <Menu.Item\r\n                name='Hosting'\r\n                active={activeEventMenu === 'hosting'}\r\n                disabled = {activeEventMenu !== 'hosting' && loadingUserActivities}\r\n                onClick={() => handleItemClick('hosting')}\r\n            />\r\n        </Menu>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Tab, Grid, Header, Card, Loader, Dimmer } from 'semantic-ui-react';\r\nimport useStores from '../../app/stores/stores';\r\nimport ProfilesEventCard from './ProfilesEventCard';\r\nimport ProfilesEventsMenu from './ProfilesEventsMenu';\r\n\r\nexport default observer(function ProfilesEvents(){\r\n    const {profilesStore} = useStores();\r\n    const {activitiesByDate, loadingUserActivities} = profilesStore;\r\n\r\n    return (\r\n        <Tab.Pane>\r\n            <Grid>\r\n                <Grid.Column width={16}>\r\n                    <Header floated='left' icon='playstation' content='Activities'/>\r\n                </Grid.Column>\r\n                <Grid.Column width={16}>\r\n                    <ProfilesEventsMenu />\r\n                </Grid.Column>\r\n                <Grid.Column width={16}>\r\n                    {loadingUserActivities ? (\r\n                        <Dimmer active inverted style={{marginTop: 25}}>\r\n                            <Loader size='medium' inverted content='Loading activities...'/>\r\n                        </Dimmer>\r\n                    ) : (\r\n                        <Card.Group itemsPerRow={4}>\r\n                            {activitiesByDate.map(activity => (\r\n                                <ProfilesEventCard key={activity.id} activity = {activity} />\r\n                            ))}\r\n                        </Card.Group>\r\n                    )}\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Card, Grid, Header, Tab } from 'semantic-ui-react';\r\nimport useStores from '../../app/stores/stores';\r\nimport ProfilesCard from './ProfilesCard';\r\n\r\nexport default observer(function ProfilesFollows(){\r\n\r\n    const {profilesStore} = useStores();\r\n    const {loadingFollows, follows, profiles, activeTab} = profilesStore;\r\n\r\n    return (\r\n        <Tab.Pane loading={loadingFollows}>\r\n            <Grid>\r\n                <Grid.Column width={16}>\r\n                    <Header \r\n                        floated='left' \r\n                        icon='user' \r\n                        content={activeTab === 3 ? `People following ${profiles?.displayName}` : `People ${profiles?.displayName} is following`}/>\r\n                </Grid.Column>\r\n                <Grid.Column width={16}>\r\n                    <Card.Group itemsPerRow={4}>\r\n                        {follows.map(follow => (\r\n                            <ProfilesCard key={follow.userName} profiles={follow} />\r\n                        ))}\r\n                    </Card.Group>\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import React from 'react';\r\nimport { Cropper } from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css'\r\n\r\ninterface Props {\r\n    photoPreview: string;\r\n    setCropper: (cropper: Cropper) => void\r\n}\r\n\r\nexport default function PhotoCropperWidget({photoPreview, setCropper}: Props){\r\n    return (\r\n        <Cropper\r\n            src={photoPreview}\r\n            style={{height: 200, width: '100%'}}\r\n            initialAspectRatio={1}\r\n            aspectRatio={1}\r\n            preview='.img-preview'\r\n            guides={false}\r\n            viewMode={1}\r\n            autoCropArea={1}\r\n            background={false}\r\n            onInitialized={cropper => setCropper(cropper)}\r\n        />\r\n    )\r\n}","import React, {useCallback} from 'react'\r\nimport {useDropzone} from 'react-dropzone'\r\nimport { Header, Icon } from 'semantic-ui-react'\r\n\r\ninterface Props {\r\n    setFiles: (files: any) => void;\r\n}\r\n\r\nexport default function PhotoDropzoneWidget ({setFiles}: Props) {\r\n\r\n    const dzStyles = {\r\n        border: 'dashed 3px #eee',\r\n        borderColor: '#eee',\r\n        borderRadius: '5px',\r\n        paddingTop: '30px',\r\n        textAlign: 'center' as 'center',\r\n        height: 200\r\n    }\r\n\r\n    const dzActive = {\r\n        borderColor: 'green'\r\n    }\r\n\r\n    const onDrop = useCallback(acceptedFiles => {\r\n        setFiles(acceptedFiles.map((file: any) => Object.assign(file, {\r\n            preview: URL.createObjectURL(file)\r\n        })))\r\n    }, [setFiles])\r\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\r\n\r\n    return (\r\n        <div {...getRootProps()} style={isDragActive ? {...dzStyles, ...dzActive} : dzStyles}>\r\n            <input {...getInputProps()} />\r\n            <Icon name='upload' size='huge'/>\r\n            <Header content='Drop photo here...'/>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Button, Grid, Header } from 'semantic-ui-react';\r\nimport PhotoCropperWidget from './PhotoCropperWidget';\r\nimport PhotoDropzoneWidget from './PhotoDropzoneWidget';\r\n\r\ninterface Props {\r\n    uploadPhoto: (file: Blob) => void;\r\n    loading: boolean;\r\n}\r\n\r\n\r\nexport default function PhotoUploadWidget({uploadPhoto, loading}: Props){\r\n    const [files, setFiles] = useState<any>([]);\r\n    const [cropper, setCropper] = useState<Cropper>();\r\n\r\n    function onCrop(){\r\n        if(cropper){\r\n            cropper.getCroppedCanvas().toBlob(blob => uploadPhoto(blob!));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            files.forEach((file: any) => URL.revokeObjectURL(file.preview));\r\n        }\r\n    }, [files])\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid.Column width={4} textAlign='center'>\r\n                <Header sub color='teal' content='Step 1 - Add Photo'/>\r\n                <PhotoDropzoneWidget setFiles={setFiles} />\r\n            </Grid.Column>\r\n            <Grid.Column width={1}/>\r\n            <Grid.Column width={5} textAlign='center'>\r\n                <Header sub color='teal' content='Step 2 - Resize Photo'/>\r\n                {files && files.length > 0 && (\r\n                    <PhotoCropperWidget setCropper={setCropper} photoPreview={files[0].preview} />\r\n                )}\r\n            </Grid.Column>\r\n            <Grid.Column width={1}/>\r\n            <Grid.Column width={5} textAlign='center'>\r\n                <Header sub color='teal' content='Step 3 - Preview & Upload'/>\r\n                {files && files.length > 0 && (\r\n                    <>\r\n                        <div className='img-preview' style={{minHeight: 200, overflow: 'hidden'}}/>\r\n                    </>\r\n                )}\r\n            </Grid.Column>\r\n            <Grid.Column width={4}/>\r\n            <Grid.Column width={8}>\r\n                {files && files.length > 0 && (\r\n                    <Button.Group widths={2}>\r\n                        <Button loading={loading} onClick={onCrop} positive icon='check' />\r\n                        <Button onClick={() => setFiles([])} icon='close' />\r\n                    </Button.Group>\r\n                )}\r\n            </Grid.Column>\r\n            <Grid.Column width={4}/>\r\n        </Grid>\r\n    )\r\n}","import { observer } from 'mobx-react-lite';\r\nimport React, { useState } from 'react';\r\nimport { Button, Card, Grid, Header, Image, Tab } from 'semantic-ui-react';\r\nimport PhotoUploadWidget from '../../app/common/photos/PhotoUploadWidget';\r\nimport { Photo, Profiles } from '../../app/models/profiles';\r\nimport useStores from '../../app/stores/stores';\r\n\r\ninterface Props {\r\n    profiles: Profiles | null;\r\n}\r\n\r\nexport default observer(function ProfilesPhotos({profiles}: Props){\r\n    const {profilesStore: {isCurrentUser, uploadPhoto, isUpload, isSetMain, setMainPhoto, isDeleting, deletePhoto}} = useStores();\r\n    const [isPhotoMode, setIsPhotoMode] = useState(false);\r\n    const [targetMainPhoto, setTargetMainPhoto] = useState('');\r\n\r\n    function handleUploadPhoto(file: Blob){\r\n        uploadPhoto(file).then(() => setIsPhotoMode(false))\r\n    }\r\n\r\n    function handleSetMainPhoto(photo: Photo){\r\n        setTargetMainPhoto(photo.id);\r\n        setMainPhoto(photo);\r\n    }\r\n\r\n    function handleDeletePhoto(photo: Photo){\r\n        setTargetMainPhoto(photo.id);\r\n        deletePhoto(photo.id);\r\n    }\r\n\r\n    return (\r\n        <Tab.Pane>\r\n            <Grid>\r\n                <Grid.Column width={16}>\r\n                    <Header floated='left' icon='image' content='Photos'/>\r\n                    {isCurrentUser && (\r\n                        <Button \r\n                            floated='right' \r\n                            basic \r\n                            content = {isPhotoMode ? \"Cancel\" : \"Add Photo\"}\r\n                            onClick = {() => setIsPhotoMode(!isPhotoMode)}\r\n                        />\r\n                    )}\r\n                </Grid.Column>\r\n                <Grid.Column width={16}>\r\n                    {isPhotoMode ? (\r\n                        <PhotoUploadWidget uploadPhoto = {handleUploadPhoto} loading = {isUpload}/>\r\n                    ) : (\r\n                        <Card.Group itemsPerRow={5}>\r\n                            {profiles!.photos?.map(photo => (\r\n                                <Card key={photo.id}>\r\n                                    <Image src={photo.url}/>\r\n                                    {isCurrentUser && (\r\n                                        <Button.Group fluid widths={2}>\r\n                                            <Button\r\n                                                basic\r\n                                                color={photo.isMain ? 'blue' : 'green'}\r\n                                                icon={photo.isMain ? 'eye' : 'check'}\r\n                                                disabled={photo.isMain}\r\n                                                onClick = {() => handleSetMainPhoto(photo)}\r\n                                                loading={isSetMain && photo.id === targetMainPhoto}\r\n                                            />\r\n                                            <Button \r\n                                                basic \r\n                                                color='red' \r\n                                                icon='trash'\r\n                                                onClick={() => handleDeletePhoto(photo)}\r\n                                                disabled={photo.isMain}\r\n                                                loading={isDeleting && photo.id === targetMainPhoto}\r\n                                            />\r\n                                        </Button.Group>\r\n                                    )}\r\n                                </Card>\r\n                            ))}\r\n                        </Card.Group>\r\n                    )}\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Tab.Pane>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport { Tab } from 'semantic-ui-react';\r\nimport { Profiles } from '../../app/models/profiles';\r\nimport useStores from '../../app/stores/stores';\r\nimport ProfilesEvents from './ProfilesEvents';\r\nimport ProfilesFollows from './ProfilesFollows';\r\nimport ProfilesPhotos from './ProfilesPhotos';\r\n\r\ninterface Props {\r\n    profiles: Profiles | null;\r\n}\r\n\r\nexport default observer(function ProfilesContent({profiles}: Props){\r\n    const {profilesStore} = useStores();\r\n    const panes = [\r\n        {menuItem: 'About', render: () => <Tab.Pane>About</Tab.Pane>},\r\n        {menuItem: 'Photos', render: () => <ProfilesPhotos profiles={profiles}/>},\r\n        {menuItem: 'Events', render: () => <ProfilesEvents />},\r\n        {menuItem: 'Followers', render: () => <ProfilesFollows/>},\r\n        {menuItem: 'Following', render: () => <ProfilesFollows/>}\r\n    ]\r\n    return (\r\n        <Tab\r\n            menu={{fluid: true, vertical: true}}\r\n            menuPosition = 'right'\r\n            panes={panes}\r\n            onTabChange={(e, data) => profilesStore.setActiveTab(data.activeIndex)}\r\n        />\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React from 'react';\r\nimport {Divider, Grid, Header, Item, Segment, Statistic } from 'semantic-ui-react';\r\nimport { Profiles } from '../../app/models/profiles';\r\nimport FollowButton from './FollowButton';\r\n\r\ninterface Props {\r\n    profiles: Profiles | null;\r\n}\r\n\r\nexport default observer(function ProfileHeader({profiles}: Props){\r\n    \r\n    return (\r\n        <Segment>\r\n            <Grid>\r\n                <Grid.Column width={12}>\r\n                    <Item.Group>\r\n                        <Item>\r\n                            <Item.Image avatar size='small' src={profiles?.mainPhoto || '/assets/user.png'} />\r\n                            <Item.Content verticalAlign='middle'>\r\n                                <Header as='h1' content={profiles?.displayName}/>\r\n                            </Item.Content>\r\n                        </Item>\r\n                    </Item.Group>\r\n                </Grid.Column>\r\n                <Grid.Column width={4}>\r\n                    <Statistic.Group widths={2}>\r\n                        <Statistic label='Followers' value={profiles?.followersCount}/>\r\n                        <Statistic label='Following' value={profiles?.followingsCount}/>\r\n                    </Statistic.Group>\r\n                    <Divider/>\r\n                    {profiles && (\r\n                        <FollowButton profiles={profiles} />\r\n                    )}\r\n                </Grid.Column>\r\n            </Grid>\r\n        </Segment>\r\n    )\r\n})","import { observer } from 'mobx-react-lite';\r\nimport React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid } from 'semantic-ui-react';\r\nimport Loading from '../../app/layout/Loading';\r\nimport useStores from '../../app/stores/stores';\r\nimport ProfilesContent from './ProfilesContent';\r\nimport ProfilesHeader from './ProfilesHeader';\r\n\r\nexport default observer(function ProfilesPage(){\r\n    const {username} = useParams<{username: string}>();\r\n\r\n    const {profilesStore} = useStores();\r\n    const {isLoading, getProfiles, profiles} = profilesStore;\r\n\r\n    useEffect(() => {\r\n        profilesStore.getProfiles(username);\r\n    }, [profilesStore, getProfiles, username])\r\n\r\n    if(isLoading) return <Loading content = 'Loading profiles...'/>\r\n    \r\n    return (\r\n        <Grid>\r\n            <Grid.Column width=\"16\">\r\n                <ProfilesHeader profiles={profiles}/>\r\n                <ProfilesContent profiles={profiles}/>\r\n            </Grid.Column>\r\n        </Grid>\r\n    )\r\n})","import { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\r\nimport useStores from \"../stores/stores\";\r\n\r\ninterface Props extends RouteProps{\r\n    component: React.ComponentType<any> | React.ComponentType<RouteComponentProps<any>>;\r\n}\r\n\r\nexport default function PrivateRoute({component: Component, ...rest}: Props){\r\n    const {userStore} = useStores();\r\n    const {isLoggedIn} = userStore;\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render = {(props) => isLoggedIn ? <Component {...props} /> : <Redirect to='/'/>}\r\n        />\r\n    )\r\n}","import { useLocation } from \"react-router-dom\";\r\n\r\nexport default function useQuery(){\r\n    return new URLSearchParams(useLocation().search);\r\n}","import React from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { Button, Header, Icon, Segment } from 'semantic-ui-react';\r\nimport agent from '../../app/api/agent';\r\nimport useQuery from '../../app/common/utils/hook';\r\n\r\nexport default function RegisterSuccess(){\r\n    const email = useQuery().get('email') as string;\r\n\r\n    function handleResendEmail(){\r\n        agent.users.resendConfirmEmail(email).then(() => {\r\n            toast.success(\"Confirmation email resent - please check your email\");\r\n        })\r\n    }\r\n    \r\n    return (\r\n        <Segment placeholder textAlign='center'>\r\n            <Header color='green'>\r\n                <Icon name='check'/>\r\n                Successfully registered !\r\n            </Header>\r\n            <p>Please check your email (including junk email) for the confirmation email.</p>\r\n            {email && \r\n                <>\r\n                    <p>Didn't receive the email? Click the below button to resend.</p>\r\n                    <Button primary onClick={handleResendEmail} content='Resend email' size='huge'/>\r\n                </>\r\n            }\r\n        </Segment>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { Button, Header, Icon, Segment } from 'semantic-ui-react';\r\nimport agent from '../../app/api/agent';\r\nimport useQuery from '../../app/common/utils/hook';\r\nimport useStores from '../../app/stores/stores';\r\nimport LoginForm from './LoginForm';\r\n\r\nexport default function ConfirmEmail(){\r\n    const {modalStore} = useStores();\r\n    const email = useQuery().get('email') as string;\r\n    const token = useQuery().get('token') as string;\r\n\r\n    function handleResendEmail(){\r\n        agent.users.resendConfirmEmail(email).then(() => {\r\n            toast.success(\"Confirmation email resent - please check your email\");\r\n        })\r\n    }\r\n\r\n    const Status = {\r\n        Verifying: 'Verifying',\r\n        Failed: 'Failed',\r\n        Success: 'Success'\r\n    }\r\n    const [status, setStatus] = useState(Status.Verifying);\r\n\r\n    useEffect(() => {\r\n        agent.users.confirmEmail(token, email).then(() => {\r\n            setStatus(Status.Success)\r\n        }).catch(() => {\r\n            setStatus(Status.Failed)\r\n        })\r\n    }, [Status.Failed, Status.Success, token, email])\r\n\r\n    function getBody() {\r\n        switch (status) {\r\n            case Status.Verifying:\r\n                return <p>Verifying...</p>;\r\n            case Status.Failed:\r\n                return (\r\n                    <div>\r\n                        <p>Verification failed.  You can try resending the verify link to your email</p>\r\n                        <Button primary onClick={handleResendEmail} size='huge' content='Resend email' />\r\n                    </div>\r\n                );\r\n            case Status.Success:\r\n                return (\r\n                    <div>\r\n                        <p>Email has been verified - you can now login</p>\r\n                        <Button primary onClick={() => modalStore.openModal(<LoginForm />)} size='medium' >\r\n                            Login to Reactivities\r\n                        </Button>\r\n                    </div>\r\n                );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Segment placeholder textAlign='center'>\r\n            <Header icon color='olive'>\r\n                <Icon name='envelope' />\r\n                Email verification\r\n            </Header>\r\n            <Segment.Inline>\r\n                {getBody()}\r\n            </Segment.Inline>\r\n        </Segment>\r\n    )\r\n}","import React, { useEffect } from 'react';\r\nimport { Container } from 'semantic-ui-react';\r\nimport NavBar from './NavBar';\r\nimport ActivityDashboard from '../../features/activities/dashboard/ActivityDashboard';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Route, Switch, useLocation } from 'react-router-dom';\r\nimport HomePage from '../../features/activities/home/HomePage';\r\nimport ActivityForm from '../../features/activities/form/ActivityForm';\r\nimport ActivityDetails from '../../features/activities/details/ActivityDetails';\r\nimport TestErrors from '../../features/errors/TestError';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport NotFound from '../../features/errors/NotFound';\r\nimport ServerError from '../../features/errors/ServerError';\r\nimport useStores from '../stores/stores';\r\nimport Loading from './Loading';\r\nimport ModalContainer from '../common/modals/ModalContainer';\r\nimport ProfilesPage from '../../features/profiles/ProfilesPage';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport RegisterSuccess from '../../features/users/RegisterSuccess';\r\nimport ConfirmEmail from '../../features/users/ConfirmEmail';\r\n\r\nexport default observer(function App() {\r\n\r\n  const location = useLocation();\r\n  const {commonStore, userStore} = useStores();\r\n\r\n  useEffect(() => {\r\n    if(commonStore.token){\r\n      userStore.getCurrentUser().finally(() => commonStore.setAppLoaded());\r\n    }\r\n    else{\r\n      userStore.getFacebookLoginStatus().then(() => commonStore.setAppLoaded());\r\n    }\r\n  }, [commonStore, userStore]);\r\n\r\n  if(!commonStore.appLoaded) return <Loading content = 'Loading app...'/>\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer position=\"top-right\"/>\r\n      <ModalContainer/>\r\n      <Route exact path='/' component={HomePage}/>\r\n      <Route \r\n        path='/(.+)' \r\n        render = {() => (\r\n          <>\r\n            <NavBar/>\r\n            <Container style={{marginTop: '7em'}}>\r\n              <Switch>\r\n                <PrivateRoute path='/activities' component={ActivityDashboard}/>\r\n                <PrivateRoute key={location.key} path={['/creating', '/updating/:id']} component={ActivityForm}/>\r\n                <PrivateRoute path='/details/:id' component={ActivityDetails}/>\r\n                <PrivateRoute path='/profiles/:username' component={ProfilesPage}/>\r\n                <Route path='/account/registerSuccess' component={RegisterSuccess} />\r\n                <Route path='/account/confirmEmail' component={ConfirmEmail} />\r\n                <PrivateRoute path='/errors' component={TestErrors}/>\r\n                <Route path='/server-error' component={ServerError}/>\r\n                <Route component={NotFound}/>\r\n              </Switch>\r\n            </Container>\r\n          </>\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n})","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function ScrollToTop() {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './app/layout/styles.css';\nimport 'react-calendar/dist/Calendar.css';\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'react-datepicker/dist/react-datepicker.css';\nimport 'semantic-ui-css/semantic.min.css'; \nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { StoreContext, stores } from './app/stores/stores';\nimport { Router } from 'react-router-dom';\nimport {createBrowserHistory} from 'history'\nimport ScrollToTop from './app/layout/ScrollToTop';\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <StoreContext.Provider value={stores}>\n    <Router history={history}>\n      <ScrollToTop/>\n      <App/>\n    </Router>\n  </StoreContext.Provider>\n    ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}